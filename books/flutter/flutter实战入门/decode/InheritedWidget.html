<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <title>InheritedWidget æºç åˆ†æ |  Flutter | è€å­Ÿ</title>
    <meta name="description" content="">
    <meta name="generator" content="VuePress 1.4.1">
    <link rel="icon" href="../logo1.png">
    <script src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>(adsbygoogle = window.adsbygoogle || []).push({  google_ad_client: ca-pub-3860386934764403,  enable_page_level_ads: true });</script>
    <script src="https://my.openwrite.cn/js/readmore.js" type="text/javascript"></script>
    <script>const btw = new BTWPlugin(); setTimeout(function () { btw.init({id: 'app',blogId: '20099-1603808940154-239',name: 'è€å­ŸFlutter',qrcode: 'http://img.laomengit.com/20201028220227.jpg',keyword: 'vip',});},3000);</script>
    <script src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>(adsbygoogle = window.adsbygoogle || []).push({  google_ad_client: ca-pub-3860386934764403,  enable_page_level_ads: true });</script>
    <meta name="description" content="æ‰«æä¸Šæ–¹å¾®ä¿¡ï¼Œé¢†å–ã€Š330ä¸ªæ§ä»¶å¤§å…¨ã€‹å’Œ ã€ŠFlutter å®æˆ˜ã€‹PDF">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <meta name="keywords" content="æ‰«æä¸Šæ–¹å¾®ä¿¡ï¼Œé¢†å–ã€Š330ä¸ªæ§ä»¶å¤§å…¨ã€‹å’Œ ã€ŠFlutter å®æˆ˜ã€‹PDF">
    <link rel="preload" href="../assets/css/0.styles.94618c66.css" as="style"><link rel="preload" href="../assets/js/app.fb541e49.js" as="script"><link rel="preload" href="../assets/js/2.ed846731.js" as="script"><link rel="preload" href="../assets/js/55.c1bbd918.js" as="script"><link rel="prefetch" href="../assets/js/10.9c86fefd.js"><link rel="prefetch" href="../assets/js/100.cc7f9af3.js"><link rel="prefetch" href="../assets/js/101.b31e2401.js"><link rel="prefetch" href="../assets/js/102.0b30ccdf.js"><link rel="prefetch" href="../assets/js/103.b1bbf41e.js"><link rel="prefetch" href="../assets/js/104.b7f064d0.js"><link rel="prefetch" href="../assets/js/105.bd854612.js"><link rel="prefetch" href="../assets/js/106.6c912bbd.js"><link rel="prefetch" href="../assets/js/107.b9490dcf.js"><link rel="prefetch" href="../assets/js/108.133aafde.js"><link rel="prefetch" href="../assets/js/109.3935dd87.js"><link rel="prefetch" href="../assets/js/11.8338d8e3.js"><link rel="prefetch" href="../assets/js/110.ae40c328.js"><link rel="prefetch" href="../assets/js/111.da281de9.js"><link rel="prefetch" href="../assets/js/112.f0c6393e.js"><link rel="prefetch" href="../assets/js/113.4b98631c.js"><link rel="prefetch" href="../assets/js/114.c6fe9fd6.js"><link rel="prefetch" href="../assets/js/115.89e5facd.js"><link rel="prefetch" href="../assets/js/116.ea0ad20a.js"><link rel="prefetch" href="../assets/js/117.3d3e0739.js"><link rel="prefetch" href="../assets/js/118.01617441.js"><link rel="prefetch" href="../assets/js/119.2e7e94e6.js"><link rel="prefetch" href="../assets/js/12.04bcf5a8.js"><link rel="prefetch" href="../assets/js/120.f3c1ae4e.js"><link rel="prefetch" href="../assets/js/121.bb2e907f.js"><link rel="prefetch" href="../assets/js/122.d6d98adf.js"><link rel="prefetch" href="../assets/js/123.3b864f6b.js"><link rel="prefetch" href="../assets/js/124.66acef4f.js"><link rel="prefetch" href="../assets/js/125.41b3b74f.js"><link rel="prefetch" href="../assets/js/126.21ff2b3b.js"><link rel="prefetch" href="../assets/js/127.0a80beca.js"><link rel="prefetch" href="../assets/js/128.d3f23fc0.js"><link rel="prefetch" href="../assets/js/129.50cdc824.js"><link rel="prefetch" href="../assets/js/13.e7d5abfc.js"><link rel="prefetch" href="../assets/js/130.a5735404.js"><link rel="prefetch" href="../assets/js/131.352d73db.js"><link rel="prefetch" href="../assets/js/132.4ce6818e.js"><link rel="prefetch" href="../assets/js/133.bdb396e8.js"><link rel="prefetch" href="../assets/js/134.eb219dda.js"><link rel="prefetch" href="../assets/js/135.623e9bb6.js"><link rel="prefetch" href="../assets/js/136.0f766fdf.js"><link rel="prefetch" href="../assets/js/137.58ee1ccd.js"><link rel="prefetch" href="../assets/js/138.069642a8.js"><link rel="prefetch" href="../assets/js/139.5102f654.js"><link rel="prefetch" href="../assets/js/14.b45c46f5.js"><link rel="prefetch" href="../assets/js/140.9b959c1e.js"><link rel="prefetch" href="../assets/js/141.660d5f8c.js"><link rel="prefetch" href="../assets/js/142.f4d8f70c.js"><link rel="prefetch" href="../assets/js/143.cb60846d.js"><link rel="prefetch" href="../assets/js/144.0a703b86.js"><link rel="prefetch" href="../assets/js/145.2567f811.js"><link rel="prefetch" href="../assets/js/146.2b026dbf.js"><link rel="prefetch" href="../assets/js/147.b890d706.js"><link rel="prefetch" href="../assets/js/148.099db2cc.js"><link rel="prefetch" href="../assets/js/149.faed9ed3.js"><link rel="prefetch" href="../assets/js/15.122f76be.js"><link rel="prefetch" href="../assets/js/150.ff2419a6.js"><link rel="prefetch" href="../assets/js/151.028bad5f.js"><link rel="prefetch" href="../assets/js/152.7de6faf8.js"><link rel="prefetch" href="../assets/js/153.1f49a322.js"><link rel="prefetch" href="../assets/js/154.123edea1.js"><link rel="prefetch" href="../assets/js/155.4f64820c.js"><link rel="prefetch" href="../assets/js/156.73b3635e.js"><link rel="prefetch" href="../assets/js/157.dcd21e67.js"><link rel="prefetch" href="../assets/js/158.f65b9573.js"><link rel="prefetch" href="../assets/js/159.e0160ae4.js"><link rel="prefetch" href="../assets/js/16.04b7da8f.js"><link rel="prefetch" href="../assets/js/160.e7aca14e.js"><link rel="prefetch" href="../assets/js/161.c12c9614.js"><link rel="prefetch" href="../assets/js/162.ee39cc31.js"><link rel="prefetch" href="../assets/js/163.33f6e8ee.js"><link rel="prefetch" href="../assets/js/164.f0bb9ba4.js"><link rel="prefetch" href="../assets/js/165.856d9a9d.js"><link rel="prefetch" href="../assets/js/166.0844754b.js"><link rel="prefetch" href="../assets/js/167.30dd35a4.js"><link rel="prefetch" href="../assets/js/168.16e6ad1d.js"><link rel="prefetch" href="../assets/js/169.0a163ba4.js"><link rel="prefetch" href="../assets/js/17.80e1bba6.js"><link rel="prefetch" href="../assets/js/170.06d71863.js"><link rel="prefetch" href="../assets/js/171.c95d88f7.js"><link rel="prefetch" href="../assets/js/172.04060918.js"><link rel="prefetch" href="../assets/js/173.342a0e48.js"><link rel="prefetch" href="../assets/js/174.9edb91b7.js"><link rel="prefetch" href="../assets/js/175.58d33846.js"><link rel="prefetch" href="../assets/js/176.be87d2b3.js"><link rel="prefetch" href="../assets/js/177.5f06e21a.js"><link rel="prefetch" href="../assets/js/178.d38a3dfb.js"><link rel="prefetch" href="../assets/js/179.70d8dd42.js"><link rel="prefetch" href="../assets/js/18.4849deaa.js"><link rel="prefetch" href="../assets/js/180.b007b2ba.js"><link rel="prefetch" href="../assets/js/181.158adff8.js"><link rel="prefetch" href="../assets/js/182.46b0a70f.js"><link rel="prefetch" href="../assets/js/183.05f8eb6a.js"><link rel="prefetch" href="../assets/js/184.fbfb28ce.js"><link rel="prefetch" href="../assets/js/185.8c63332b.js"><link rel="prefetch" href="../assets/js/186.59b33c36.js"><link rel="prefetch" href="../assets/js/187.f6aae0cc.js"><link rel="prefetch" href="../assets/js/188.dc683ca9.js"><link rel="prefetch" href="../assets/js/189.0d39de51.js"><link rel="prefetch" href="../assets/js/19.d4d751b1.js"><link rel="prefetch" href="../assets/js/190.1ea35758.js"><link rel="prefetch" href="../assets/js/191.4cf03f02.js"><link rel="prefetch" href="../assets/js/192.c2928b4c.js"><link rel="prefetch" href="../assets/js/193.9ed06450.js"><link rel="prefetch" href="../assets/js/194.31652ea2.js"><link rel="prefetch" href="../assets/js/195.06aca932.js"><link rel="prefetch" href="../assets/js/196.304f724a.js"><link rel="prefetch" href="../assets/js/197.8e3b2d2a.js"><link rel="prefetch" href="../assets/js/198.8ec15bed.js"><link rel="prefetch" href="../assets/js/199.fcea895b.js"><link rel="prefetch" href="../assets/js/20.ba1b32db.js"><link rel="prefetch" href="../assets/js/200.9a001c48.js"><link rel="prefetch" href="../assets/js/201.940f0c1b.js"><link rel="prefetch" href="../assets/js/202.a5a07eba.js"><link rel="prefetch" href="../assets/js/203.a02b8267.js"><link rel="prefetch" href="../assets/js/204.8f963ce9.js"><link rel="prefetch" href="../assets/js/205.8980b431.js"><link rel="prefetch" href="../assets/js/206.979f1932.js"><link rel="prefetch" href="../assets/js/207.7483f2a5.js"><link rel="prefetch" href="../assets/js/208.8bc560fa.js"><link rel="prefetch" href="../assets/js/209.2b347bd2.js"><link rel="prefetch" href="../assets/js/21.308f2dcf.js"><link rel="prefetch" href="../assets/js/210.ec632d70.js"><link rel="prefetch" href="../assets/js/211.7631ae15.js"><link rel="prefetch" href="../assets/js/212.4def8830.js"><link rel="prefetch" href="../assets/js/213.9f4dfe00.js"><link rel="prefetch" href="../assets/js/214.fb6d516e.js"><link rel="prefetch" href="../assets/js/215.61c68b52.js"><link rel="prefetch" href="../assets/js/216.4b6afa68.js"><link rel="prefetch" href="../assets/js/217.94b2511a.js"><link rel="prefetch" href="../assets/js/218.fbcbdfc2.js"><link rel="prefetch" href="../assets/js/219.f89a8ede.js"><link rel="prefetch" href="../assets/js/22.35a53d65.js"><link rel="prefetch" href="../assets/js/220.7ca4a79e.js"><link rel="prefetch" href="../assets/js/221.4c403e0a.js"><link rel="prefetch" href="../assets/js/222.f8d2faad.js"><link rel="prefetch" href="../assets/js/223.2f28faa0.js"><link rel="prefetch" href="../assets/js/224.270c73ac.js"><link rel="prefetch" href="../assets/js/225.0fb373d4.js"><link rel="prefetch" href="../assets/js/226.c715c68c.js"><link rel="prefetch" href="../assets/js/227.e9aa047a.js"><link rel="prefetch" href="../assets/js/228.b4b9b5a9.js"><link rel="prefetch" href="../assets/js/229.3cba88ad.js"><link rel="prefetch" href="../assets/js/23.b97a9de9.js"><link rel="prefetch" href="../assets/js/230.32430bdc.js"><link rel="prefetch" href="../assets/js/231.8092011c.js"><link rel="prefetch" href="../assets/js/232.4ee1866e.js"><link rel="prefetch" href="../assets/js/233.99c5a109.js"><link rel="prefetch" href="../assets/js/234.9b25d984.js"><link rel="prefetch" href="../assets/js/235.fc49952f.js"><link rel="prefetch" href="../assets/js/236.31fff311.js"><link rel="prefetch" href="../assets/js/237.f31bfad5.js"><link rel="prefetch" href="../assets/js/238.e8ce525a.js"><link rel="prefetch" href="../assets/js/239.75b02536.js"><link rel="prefetch" href="../assets/js/24.45287237.js"><link rel="prefetch" href="../assets/js/240.fa34c63a.js"><link rel="prefetch" href="../assets/js/241.14037aa4.js"><link rel="prefetch" href="../assets/js/242.35f51516.js"><link rel="prefetch" href="../assets/js/243.cf30315b.js"><link rel="prefetch" href="../assets/js/244.b5a7a52d.js"><link rel="prefetch" href="../assets/js/245.10136f51.js"><link rel="prefetch" href="../assets/js/246.5fb5d01d.js"><link rel="prefetch" href="../assets/js/247.d3200efc.js"><link rel="prefetch" href="../assets/js/248.c98c01c6.js"><link rel="prefetch" href="../assets/js/249.679886ec.js"><link rel="prefetch" href="../assets/js/25.d70e9f50.js"><link rel="prefetch" href="../assets/js/250.03017324.js"><link rel="prefetch" href="../assets/js/251.706a87c0.js"><link rel="prefetch" href="../assets/js/252.58df0767.js"><link rel="prefetch" href="../assets/js/253.907cb63e.js"><link rel="prefetch" href="../assets/js/254.c03b6bdc.js"><link rel="prefetch" href="../assets/js/255.4429330b.js"><link rel="prefetch" href="../assets/js/256.e2fa8013.js"><link rel="prefetch" href="../assets/js/257.dc32d74b.js"><link rel="prefetch" href="../assets/js/258.2670ad34.js"><link rel="prefetch" href="../assets/js/259.27321517.js"><link rel="prefetch" href="../assets/js/26.b1e4754b.js"><link rel="prefetch" href="../assets/js/260.ededf7ae.js"><link rel="prefetch" href="../assets/js/261.9fde1d55.js"><link rel="prefetch" href="../assets/js/262.c7e77f3e.js"><link rel="prefetch" href="../assets/js/263.383ea7fc.js"><link rel="prefetch" href="../assets/js/264.d6b8e008.js"><link rel="prefetch" href="../assets/js/265.fd3b1bde.js"><link rel="prefetch" href="../assets/js/266.47e556a6.js"><link rel="prefetch" href="../assets/js/267.964a906f.js"><link rel="prefetch" href="../assets/js/268.fc56c646.js"><link rel="prefetch" href="../assets/js/269.37dfab97.js"><link rel="prefetch" href="../assets/js/27.7b17e2df.js"><link rel="prefetch" href="../assets/js/270.4256fc8c.js"><link rel="prefetch" href="../assets/js/271.25db331f.js"><link rel="prefetch" href="../assets/js/272.e7dec7e2.js"><link rel="prefetch" href="../assets/js/273.3b4a5e8f.js"><link rel="prefetch" href="../assets/js/274.3d208e61.js"><link rel="prefetch" href="../assets/js/275.be13f3b7.js"><link rel="prefetch" href="../assets/js/276.2f9726e2.js"><link rel="prefetch" href="../assets/js/277.a8ccf0e2.js"><link rel="prefetch" href="../assets/js/278.6568527a.js"><link rel="prefetch" href="../assets/js/279.81261a0d.js"><link rel="prefetch" href="../assets/js/28.d83b5a12.js"><link rel="prefetch" href="../assets/js/280.94c9cf1d.js"><link rel="prefetch" href="../assets/js/281.53f85e19.js"><link rel="prefetch" href="../assets/js/282.08f7fb89.js"><link rel="prefetch" href="../assets/js/283.e4fddba4.js"><link rel="prefetch" href="../assets/js/284.4d89aaa5.js"><link rel="prefetch" href="../assets/js/285.cd927c05.js"><link rel="prefetch" href="../assets/js/286.121f62e7.js"><link rel="prefetch" href="../assets/js/287.77bc2205.js"><link rel="prefetch" href="../assets/js/288.8b346ea7.js"><link rel="prefetch" href="../assets/js/289.03606b43.js"><link rel="prefetch" href="../assets/js/29.85246b83.js"><link rel="prefetch" href="../assets/js/290.da3d6be5.js"><link rel="prefetch" href="../assets/js/291.ba07ecbe.js"><link rel="prefetch" href="../assets/js/292.b808b957.js"><link rel="prefetch" href="../assets/js/293.f7c54f26.js"><link rel="prefetch" href="../assets/js/294.13ec2e11.js"><link rel="prefetch" href="../assets/js/295.361da916.js"><link rel="prefetch" href="../assets/js/296.2232b4b0.js"><link rel="prefetch" href="../assets/js/297.f333c504.js"><link rel="prefetch" href="../assets/js/298.eca7d9a9.js"><link rel="prefetch" href="../assets/js/299.888baf84.js"><link rel="prefetch" href="../assets/js/3.56190b95.js"><link rel="prefetch" href="../assets/js/30.05162eb0.js"><link rel="prefetch" href="../assets/js/300.78ff6de8.js"><link rel="prefetch" href="../assets/js/301.40fd9663.js"><link rel="prefetch" href="../assets/js/302.4afce6f6.js"><link rel="prefetch" href="../assets/js/303.d7a9c085.js"><link rel="prefetch" href="../assets/js/304.247829a3.js"><link rel="prefetch" href="../assets/js/305.2dae9659.js"><link rel="prefetch" href="../assets/js/306.1e5f35c1.js"><link rel="prefetch" href="../assets/js/307.61c2c485.js"><link rel="prefetch" href="../assets/js/308.79143ace.js"><link rel="prefetch" href="../assets/js/309.3bb9edad.js"><link rel="prefetch" href="../assets/js/31.0fc833df.js"><link rel="prefetch" href="../assets/js/310.217096f0.js"><link rel="prefetch" href="../assets/js/311.94e903e6.js"><link rel="prefetch" href="../assets/js/312.ac261131.js"><link rel="prefetch" href="../assets/js/313.ae6784e4.js"><link rel="prefetch" href="../assets/js/314.2dd0489d.js"><link rel="prefetch" href="../assets/js/315.0c2a740a.js"><link rel="prefetch" href="../assets/js/316.6d3c06b5.js"><link rel="prefetch" href="../assets/js/317.403d766e.js"><link rel="prefetch" href="../assets/js/318.92082b62.js"><link rel="prefetch" href="../assets/js/319.7bf95004.js"><link rel="prefetch" href="../assets/js/32.6a9d5e6f.js"><link rel="prefetch" href="../assets/js/320.b46ae0bd.js"><link rel="prefetch" href="../assets/js/321.d9dbfff3.js"><link rel="prefetch" href="../assets/js/322.732074d0.js"><link rel="prefetch" href="../assets/js/323.4d717129.js"><link rel="prefetch" href="../assets/js/324.cd692a34.js"><link rel="prefetch" href="../assets/js/325.1bb28f65.js"><link rel="prefetch" href="../assets/js/326.2a888516.js"><link rel="prefetch" href="../assets/js/327.ba989baa.js"><link rel="prefetch" href="../assets/js/328.12fb00b4.js"><link rel="prefetch" href="../assets/js/329.77ebf1cd.js"><link rel="prefetch" href="../assets/js/33.cb6638fc.js"><link rel="prefetch" href="../assets/js/330.7eb65e19.js"><link rel="prefetch" href="../assets/js/331.418dee65.js"><link rel="prefetch" href="../assets/js/332.88baa6cf.js"><link rel="prefetch" href="../assets/js/333.fbf5a56c.js"><link rel="prefetch" href="../assets/js/334.74f2b5f6.js"><link rel="prefetch" href="../assets/js/335.2c1d8208.js"><link rel="prefetch" href="../assets/js/336.e1d80353.js"><link rel="prefetch" href="../assets/js/337.c7161013.js"><link rel="prefetch" href="../assets/js/338.6113b545.js"><link rel="prefetch" href="../assets/js/339.4e2b4517.js"><link rel="prefetch" href="../assets/js/34.a27faad2.js"><link rel="prefetch" href="../assets/js/340.ded55ef1.js"><link rel="prefetch" href="../assets/js/341.47628199.js"><link rel="prefetch" href="../assets/js/342.c97a176b.js"><link rel="prefetch" href="../assets/js/343.18618c73.js"><link rel="prefetch" href="../assets/js/344.8423f0f1.js"><link rel="prefetch" href="../assets/js/345.ed069be2.js"><link rel="prefetch" href="../assets/js/346.0846b221.js"><link rel="prefetch" href="../assets/js/347.64aaf737.js"><link rel="prefetch" href="../assets/js/348.eddbb4aa.js"><link rel="prefetch" href="../assets/js/349.74717fe2.js"><link rel="prefetch" href="../assets/js/35.5da05f4f.js"><link rel="prefetch" href="../assets/js/350.cf7dc3be.js"><link rel="prefetch" href="../assets/js/351.780d8333.js"><link rel="prefetch" href="../assets/js/352.9738bf81.js"><link rel="prefetch" href="../assets/js/353.c2b3ad11.js"><link rel="prefetch" href="../assets/js/354.b173d06d.js"><link rel="prefetch" href="../assets/js/355.77960a5a.js"><link rel="prefetch" href="../assets/js/356.79e0ac0f.js"><link rel="prefetch" href="../assets/js/357.21436a45.js"><link rel="prefetch" href="../assets/js/358.a4ac47e4.js"><link rel="prefetch" href="../assets/js/359.7fb266ac.js"><link rel="prefetch" href="../assets/js/36.6adcbf7d.js"><link rel="prefetch" href="../assets/js/360.eecff0bd.js"><link rel="prefetch" href="../assets/js/361.a9cad6c9.js"><link rel="prefetch" href="../assets/js/362.94c136a4.js"><link rel="prefetch" href="../assets/js/363.8632b395.js"><link rel="prefetch" href="../assets/js/364.6a622eef.js"><link rel="prefetch" href="../assets/js/365.8d4ba528.js"><link rel="prefetch" href="../assets/js/366.db34c592.js"><link rel="prefetch" href="../assets/js/367.284b74c7.js"><link rel="prefetch" href="../assets/js/368.3c72a6d5.js"><link rel="prefetch" href="../assets/js/369.fb183793.js"><link rel="prefetch" href="../assets/js/37.36be96ef.js"><link rel="prefetch" href="../assets/js/370.b6f16557.js"><link rel="prefetch" href="../assets/js/371.cc0e6776.js"><link rel="prefetch" href="../assets/js/372.c3178ebe.js"><link rel="prefetch" href="../assets/js/373.c91f3bb2.js"><link rel="prefetch" href="../assets/js/374.a374b701.js"><link rel="prefetch" href="../assets/js/375.105b1408.js"><link rel="prefetch" href="../assets/js/376.c26d5d7a.js"><link rel="prefetch" href="../assets/js/377.a8eff236.js"><link rel="prefetch" href="../assets/js/378.73788d94.js"><link rel="prefetch" href="../assets/js/379.a4ab03f7.js"><link rel="prefetch" href="../assets/js/38.ff460382.js"><link rel="prefetch" href="../assets/js/380.1b3b89fd.js"><link rel="prefetch" href="../assets/js/381.656ad749.js"><link rel="prefetch" href="../assets/js/382.682a83d4.js"><link rel="prefetch" href="../assets/js/383.053f7895.js"><link rel="prefetch" href="../assets/js/384.ad5f0bc2.js"><link rel="prefetch" href="../assets/js/385.4d09305c.js"><link rel="prefetch" href="../assets/js/386.3f63b23e.js"><link rel="prefetch" href="../assets/js/387.fd664eb5.js"><link rel="prefetch" href="../assets/js/388.b56e4ece.js"><link rel="prefetch" href="../assets/js/389.8bcb60c1.js"><link rel="prefetch" href="../assets/js/39.1d866e08.js"><link rel="prefetch" href="../assets/js/390.fb252b4c.js"><link rel="prefetch" href="../assets/js/391.66cddeff.js"><link rel="prefetch" href="../assets/js/392.2b00d0c4.js"><link rel="prefetch" href="../assets/js/393.f0f74d19.js"><link rel="prefetch" href="../assets/js/394.7bce6a0e.js"><link rel="prefetch" href="../assets/js/4.6c5d0778.js"><link rel="prefetch" href="../assets/js/40.4f115295.js"><link rel="prefetch" href="../assets/js/41.9d07033c.js"><link rel="prefetch" href="../assets/js/42.513da47f.js"><link rel="prefetch" href="../assets/js/43.727d85f2.js"><link rel="prefetch" href="../assets/js/44.fb630bae.js"><link rel="prefetch" href="../assets/js/45.d04fcbc5.js"><link rel="prefetch" href="../assets/js/46.24285061.js"><link rel="prefetch" href="../assets/js/47.796b6421.js"><link rel="prefetch" href="../assets/js/48.25d78428.js"><link rel="prefetch" href="../assets/js/49.a440c944.js"><link rel="prefetch" href="../assets/js/5.b9d80dd2.js"><link rel="prefetch" href="../assets/js/50.0c81a1e6.js"><link rel="prefetch" href="../assets/js/51.2d7cd9be.js"><link rel="prefetch" href="../assets/js/52.594621cc.js"><link rel="prefetch" href="../assets/js/53.0f9f2f6f.js"><link rel="prefetch" href="../assets/js/54.c9592345.js"><link rel="prefetch" href="../assets/js/56.58b7bfe1.js"><link rel="prefetch" href="../assets/js/57.2085641f.js"><link rel="prefetch" href="../assets/js/58.d68f6f41.js"><link rel="prefetch" href="../assets/js/59.6e11fbc4.js"><link rel="prefetch" href="../assets/js/6.4758c40c.js"><link rel="prefetch" href="../assets/js/60.48302544.js"><link rel="prefetch" href="../assets/js/61.2f268b24.js"><link rel="prefetch" href="../assets/js/62.e31cebb8.js"><link rel="prefetch" href="../assets/js/63.511e8496.js"><link rel="prefetch" href="../assets/js/64.d8e71117.js"><link rel="prefetch" href="../assets/js/65.403db591.js"><link rel="prefetch" href="../assets/js/66.1ca6ca80.js"><link rel="prefetch" href="../assets/js/67.5c3949ae.js"><link rel="prefetch" href="../assets/js/68.50ae9cfc.js"><link rel="prefetch" href="../assets/js/69.6a5fa746.js"><link rel="prefetch" href="../assets/js/7.129f9956.js"><link rel="prefetch" href="../assets/js/70.8a421ae2.js"><link rel="prefetch" href="../assets/js/71.e7712d99.js"><link rel="prefetch" href="../assets/js/72.0cca711f.js"><link rel="prefetch" href="../assets/js/73.6ba55720.js"><link rel="prefetch" href="../assets/js/74.f4379e58.js"><link rel="prefetch" href="../assets/js/75.b4cb3977.js"><link rel="prefetch" href="../assets/js/76.85d9bc97.js"><link rel="prefetch" href="../assets/js/77.7c0a7d87.js"><link rel="prefetch" href="../assets/js/78.129d87ed.js"><link rel="prefetch" href="../assets/js/79.6d7e73b2.js"><link rel="prefetch" href="../assets/js/8.a2c4c507.js"><link rel="prefetch" href="../assets/js/80.37900447.js"><link rel="prefetch" href="../assets/js/81.e0bba523.js"><link rel="prefetch" href="../assets/js/82.5a5d7ac8.js"><link rel="prefetch" href="../assets/js/83.1f47a97e.js"><link rel="prefetch" href="../assets/js/84.1884063f.js"><link rel="prefetch" href="../assets/js/85.33fd01df.js"><link rel="prefetch" href="../assets/js/86.ef25551d.js"><link rel="prefetch" href="../assets/js/87.7c55025d.js"><link rel="prefetch" href="../assets/js/88.8df31138.js"><link rel="prefetch" href="../assets/js/89.ea12fc8a.js"><link rel="prefetch" href="../assets/js/9.e6bebbea.js"><link rel="prefetch" href="../assets/js/90.ae0a2bef.js"><link rel="prefetch" href="../assets/js/91.7a70b979.js"><link rel="prefetch" href="../assets/js/92.ff5fe7b2.js"><link rel="prefetch" href="../assets/js/93.0ca9ec86.js"><link rel="prefetch" href="../assets/js/94.960c6cc1.js"><link rel="prefetch" href="../assets/js/95.6dc8bee4.js"><link rel="prefetch" href="../assets/js/96.d37d1371.js"><link rel="prefetch" href="../assets/js/97.9c1a648f.js"><link rel="prefetch" href="../assets/js/98.a8d1fbfd.js"><link rel="prefetch" href="../assets/js/99.04564c35.js">
    <link rel="stylesheet" href="../assets/css/0.styles.94618c66.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="ant-row"><div class="sidebar-button"><i aria-label="icon: bars" class="anticon anticon-bars"><svg viewBox="0 0 1024 1024" focusable="false" data-icon="bars" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 1 0 112 0 56 56 0 1 0-112 0zm0 284a56 56 0 1 0 112 0 56 56 0 1 0-112 0zm0 284a56 56 0 1 0 112 0 56 56 0 1 0-112 0z"></path></svg></i> <span></span></div> <div class="ant-col ant-col-xs-24 ant-col-sm-24 ant-col-md-6 ant-col-lg-5 ant-col-xl-5 ant-col-xxl-4"><a href="../index.html" class="router-link-active home-link"><img src="../logo1.png" alt=" Flutter | è€å­Ÿ" class="logo"> <span class="site-name"> Flutter | è€å­Ÿ</span></a> <div class="search-box mobile-search"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></div> <div class="ant-col ant-col-xs-0 ant-col-sm-0 ant-col-md-18 ant-col-lg-19 ant-col-xl-19 ant-col-xxl-20"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><ul role="menu" id="nav" class="ant-menu ant-menu-horizontal ant-menu-root ant-menu-light"><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>Â·Â·Â·</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item"><a href="../index.html" class="router-link-active">
          é¦–é¡µ
        </a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>Â·Â·Â·</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item"><a href="../flutter/widgets/widgets_structure.html">
          ç»„ä»¶
        </a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>Â·Â·Â·</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item"><a href="../guide/introduction/mobile_system.html">
          å®æˆ˜
        </a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>Â·Â·Â·</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item ant-menu-item-selected"><a href="InheritedWidget.html" class="router-link-exact-active router-link-active">
          æºç åˆ†æ
        </a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>Â·Â·Â·</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item"><a href="../blog/20200922/Announcing%20Flutter%201.22.html">
          ç²¾å½©æ–‡ç« 
        </a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>Â·Â·Â·</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item"><a href="../plugin/upgrade.html">
          æ’ä»¶
        </a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>Â·Â·Â·</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item"><a href="../plan/Contribution.html">
          æŠ•ç¨¿
        </a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="visibility:hidden;position:absolute;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>Â·Â·Â·</span><i class="ant-menu-submenu-arrow"></i></div></li></ul> <a href="https://github.com/781238222/flutter-do" target="_blank" rel="noopener noreferrer" class="repo-link"><i aria-label="icon: github" class="anticon anticon-github"><svg viewBox="64 64 896 896" focusable="false" data-icon="github" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9a127.5 127.5 0 0 1 38.1 91v112.5c.8 9 0 17.9 15 17.9 177.1-59.7 304.6-227 304.6-424.1 0-247.2-200.4-447.3-447.5-447.3z"></path></svg></i></a></nav></div></div> <!----></header> <aside class="sidebar"><!----> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>æºç åˆ†æ</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="InheritedWidget.html" class="active sidebar-link">InheritedWidget</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul></aside> <main class="page"> <header><div style="text-align: center; padding-bottom: 30px;margin: 100px 0 0 0;"><div style="display:inline-block;"><img src="http://img.laomengit.com/laomeng_qr_1.png" style="height:180px;box-shadow:#aaa 5px 5px 10px"> <p>å¾®ä¿¡äº¤æµç¾¤</p></div> <div class="ad" style="display:inline-block;margin:0 0 0 30px"><a href="https://item.jd.com/12673329.html" onclick="buy("img")" title="ç‚¹å‡»è´­ä¹°" target="_blank"><img src="http://img.laomengit.com/flutter_cover.png" style="height:300px;box-shadow:#aaa 5px 5px 10px"></a> <br> <a onclick="buy("btn")" href="https://item.jd.com/12673329.html" title="ç‚¹å‡»è´­ä¹°" target="_blank" class="buy-btn">ç‚¹å‡»è´­ä¹°</a></div></div></header> <div class="theme-antdocs-content content__default"><blockquote><p><strong>è€å­Ÿå¯¼è¯»</strong>ï¼šè¿™æ˜¯2021å¹´æºç ç³»åˆ—çš„ç¬¬ä¸€ç¯‡æ–‡ç« ï¼Œå…¶å®æºç ç³»åˆ—çš„æ–‡ç« ä¸æ˜¯ç‰¹åˆ«å—æ¬¢è¿ï¼Œä¸€ä¸ªåŸå› æ˜¯åŸç†æ€§çš„çŸ¥è¯†éå¸¸æ¯ç‡¥ï¼Œæˆ‘è‡ªå·±çœ‹æºç çš„æ—¶å€™ç‰¹åˆ«æœ‰æ„Ÿè§¦ï¼ŒäºŒæ˜¯æƒ³æŠŠæºç åˆ†æè®²çš„é€šä¿—æ˜“æ‡‚éå¸¸å›°éš¾ï¼Œè‡ªå·±æ˜ç™½ å’Œ è®©åˆ«äººå¬æ‡‚å®Œå…¨æ˜¯ä¸¤å›äº‹ã€‚ä¸è¿‡æˆ‘ä¾ç„¶ä¼šåšæŒ Flutter æºç ç³»åˆ—çš„æ–‡ç« ï¼Œæé«˜è‡ªå·±çš„æŠ€æœ¯æ°´å¹³çš„åŒæ—¶ï¼Œä¹Ÿå¸Œæœ›å¤§å®¶æ”¶è·ä¸€äº›çŸ¥è¯†ã€‚</p></blockquote> <p>ä¸ºäº†ä½¿æºç ç³»åˆ—çš„æ–‡ç« ä¸é‚£ä¹ˆæ¯ç‡¥ï¼Œæ–‡ç« ä¸­ä¼šæœ‰å¾ˆå¤šæµç¨‹å›¾ï¼Œæµç¨‹å›¾æ¯”çº¯æ–‡å­—æ›´ç›´è§‚ï¼Œä¸€å›¾èƒœåƒè¨€ã€‚</p> <p>æˆ‘ä¹Ÿæ˜¯ç¬¬ä¸€æ¬¡å†™æºç ç³»åˆ—çš„æ–‡ç« ï¼Œå¦‚æœæ–‡ç« å“ªé‡Œæœ‰ä¸å¯¹çš„åœ°æ–¹è¯·å‘Šè¯‰æˆ‘ï¼Œè™½ç„¶æˆ‘ä¹Ÿä¸ä¸€å®šå¬ğŸ˜„ï¼Œå¼€ä¸ªç©ç¬‘ã€‚</p> <p>å¸Œæœ›å¤§å®¶æ¥ä¸ª <strong>èµ</strong>ï¼Œæ‚¨çš„ <strong>èµ</strong>æ˜¯æˆ‘å†™ä¸‹å»çš„å·¨å¤§åŠ¨åŠ›ğŸ˜„ã€‚</p> <p>æ‰€æœ‰æºç ç³»åˆ—æ–‡ç« éƒ½ä¼šåˆ†äº«åˆ°æˆ‘ä¸ªäººåšå®¢ï¼š<a href="../index.html" target="_blank" rel="noopener noreferrer">http://laomengit.com/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="æ­£æ–‡"><a href="#%E6%AD%A3%E6%96%87" class="header-anchor">#</a> æ­£æ–‡</h3> <blockquote><p>æ³¨æ„ï¼šä½¿ç”¨çš„ Flutter ç‰ˆæœ¬ å’Œ Dart ç‰ˆæœ¬å¦‚ä¸‹ï¼š</p> <p>Flutter 1.22.4 â€¢ channel stable â€¢ https://github.com/flutter/flutter.git
Framework â€¢ revision 1aafb3a8b9 (6 weeks ago) â€¢ 2020-11-13 09:59:28 -0800
Engine â€¢ revision 2c956a31c0
Tools â€¢ Dart 2.10.4</p> <p>ä¸åŒçš„ç‰ˆæœ¬å¯èƒ½æœ‰æ‰€ä¸åŒï¼Œè¯·æ³¨æ„ç‰ˆæœ¬ä¹‹é—´çš„åŒºåˆ«ã€‚</p></blockquote> <p>é¦–å…ˆï¼Œ <strong>InheritedWidget</strong> æ˜¯ä¸€ä¸ª<strong>éå¸¸é‡è¦</strong>ï¼Œ<strong>éå¸¸é‡è¦</strong>ï¼Œ<strong>éå¸¸é‡è¦</strong>çš„ç»„ä»¶ï¼Œé‡è¦çš„äº‹æƒ…è¯´3éğŸ˜„ï¼Œç³»ç»Ÿä¸­å¾ˆå¤šåŠŸèƒ½éƒ½æ˜¯åŠŸèƒ½å‹ç»„ä»¶éƒ½æ˜¯é€šè¿‡ InheritedWidget å®ç°çš„ï¼Œè‘—åçš„ <strong>Provider</strong> çŠ¶æ€ç®¡ç†æ¡†æ¶ä¹Ÿæ˜¯åŸºäº InheritedWidget å®ç°çš„ï¼Œå› æ­¤ä¸ç®¡æ˜¯å·¥ä½œä¸­ï¼Œè¿˜æ˜¯é¢è¯•ï¼ŒInheritedWidget ç»„ä»¶çš„åŸç†åŠä½¿ç”¨åœºæ™¯éƒ½æ˜¯è€ƒå¯Ÿçš„é‡ç‚¹ã€‚</p> <p>æ­¤ç¯‡æ–‡ç« åŒ…æ‹¬å¦‚ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š</p> <ul><li>InheritedWidget ç»„ä»¶ç®€ä»‹ï¼Œæ˜¯ä»€ä¹ˆåœºæ™¯ä¸‹ä½¿ç”¨ InheritedWidgetï¼Ÿ</li> <li>InheritedWidget åŸºæœ¬ç”¨æ³•ã€‚</li> <li>InheritedWidget æºç åˆ†æã€‚</li></ul> <h3 id="inheritedwidget-ç»„ä»¶ç®€ä»‹"><a href="#inheritedwidget-%E7%BB%84%E4%BB%B6%E7%AE%80%E4%BB%8B" class="header-anchor">#</a> InheritedWidget ç»„ä»¶ç®€ä»‹</h3> <p>InheritedWidget ç»„ä»¶æ˜¯åŠŸèƒ½å‹ç»„ä»¶ï¼Œæä¾›äº†<strong>æ²¿æ ‘å‘ä¸‹ï¼Œå…±äº«æ•°æ®</strong>çš„åŠŸèƒ½ï¼Œå³å­ç»„ä»¶å¯ä»¥è·å–çˆ¶ç»„ä»¶(InheritedWidget çš„å­ç±»)çš„æ•°æ®ï¼Œé€šè¿‡<strong>BuildContext.dependOnInheritedWidgetOfExactType</strong> è·å–ã€‚</p> <p>InheritedWidget ç»„ä»¶çš„å…±äº«æ•°æ®æ˜¯æ²¿ç€æ ‘ä»ä¸Šåˆ°ä¸‹ï¼Œæ˜¯å¦è”æƒ³åˆ° <strong>Notification</strong>ï¼ŒNotification æ­£å¥½ä¸ InheritedWidget ä¼ é€’æ–¹å‘ç›¸åï¼ŒNotification æ˜¯æ²¿ç€æ ‘ä»ä¸‹åˆ°ä¸Šï¼Œä¸¤è€…åŠŸèƒ½çš„å®ç°éƒ½æ˜¯å­èŠ‚ç‚¹ä¸»åŠ¨å‘èµ·ï¼ŒInheritedWidget ç»„ä»¶çš„å­èŠ‚ç‚¹ä¸»åŠ¨æŸ¥æ‰¾çˆ¶èŠ‚ç‚¹ä¸Š InheritedWidget å…±äº«çš„æ•°æ®ï¼ŒNotification ä¹Ÿæ˜¯å­èŠ‚ç‚¹ä¸»åŠ¨å‘èµ·é€šçŸ¥ï¼Œæ²¿ç€æ ‘å‘ä¸Šé€šçŸ¥ã€‚</p> <p><strong>Notification</strong> ä¹Ÿæ˜¯ Flutter ä¸­éå¸¸é‡è¦çš„ï¼Œåé¢ä¼šæœ‰ä¸“é—¨çš„æ–‡ç« è¯¦ç»†ä»‹ç»ï¼Œæ­¤ç¯‡ä¸åšä»‹ç»ã€‚</p> <p>é‚£ä¹ˆä»€ä¹ˆæ ·çš„åœºæ™¯é€‚åˆä½¿ç”¨ InheritedWidget å‘¢? é€šå¸¸Appä¼šæœ‰ç™»å½•ç”¨æˆ·ä¿¡æ¯ï¼Œç™»å½•ç”¨æˆ·ä¿¡æ¯ä¸ºå…¨å±€å…±äº«ä¿¡æ¯ï¼Œæƒ³è±¡ä¸€ä¸‹ï¼Œå­ç»„ä»¶è¦å¦‚ä½•è·å–ç™»å½•ç”¨æˆ·ä¿¡æ¯ï¼Ÿå°†ä¸Šé¢çš„åœºæ™¯æŠ½è±¡ä¸€ä¸‹ï¼Œæœ‰ä¸€é¢—ç»„ä»¶æ ‘ï¼ŒAã€H ç»„ä»¶ä¾èµ–åŒä¸€æ•°æ®ï¼Œå¦‚ä¸‹ï¼š</p> <p><img src="http://img.laomengit.com/20210117145052.png" alt=""></p> <p>Aã€H ç»„ä»¶è¦å¦‚ä½•è·å–åˆ°æ•°æ®å‘¢ï¼Ÿ</p> <p>æœ‰ä¸€ç§å®ç°æ–¹å¼æ˜¯ <strong>é€šè¿‡æ„é€ å‡½æ•°é€ä¼ </strong>ï¼Œæ•°æ®é€šè¿‡Aä¼ é€’ç»™Bï¼ŒBä¼ é€’ç»™Cã€Eï¼ŒCå’ŒEåœ¨ä¼ é€’ç»™Fã€Hï¼Œå¦‚ä¸‹å›¾è™šçº¿çš„ä¼ é€’:</p> <p><img src="http://img.laomengit.com/20210117145058.png" alt=""></p> <p>ååº”åˆ°ä»£ç ä¸Šå°±æ˜¯:</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">return</span> <span class="token function">A</span><span class="token punctuation">(</span>
  data<span class="token punctuation">:</span>data
  child<span class="token punctuation">:</span><span class="token function">B</span><span class="token punctuation">(</span>
    data<span class="token punctuation">:</span>data
    child<span class="token punctuation">:</span><span class="token function">C</span><span class="token punctuation">(</span>
      data<span class="token punctuation">:</span>data
      child<span class="token punctuation">:</span><span class="token function">F</span><span class="token punctuation">(</span>
        data<span class="token punctuation">:</span>data
      <span class="token punctuation">)</span>   
    <span class="token punctuation">)</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>è¿™æ ·çš„å®ç°ç¼ºç‚¹éå¸¸æ˜æ˜¾ï¼ŒBã€Cç»„ä»¶ä¸éœ€è¦ data æ•°æ®ï¼Œå¦‚æœç»„ä»¶æ ‘æ¯”è¾ƒæ·±çš„è¯ï¼Œé‚£å°†æ˜¯å™©æ¢¦ã€‚</p> <p>ä¸ºäº†å¤„ç†æ­¤é—®é¢˜ï¼ŒFlutter Framework æä¾›äº† InheritedWidget ç»„ä»¶ï¼ŒInheritedWidget ç»„ä»¶çš„å­ç»„ä»¶å¯ä»¥ç›´æ¥è·å–æ•°æ®ï¼Œå¦‚ä¸‹å›¾:</p> <p><img src="http://img.laomengit.com/20210117145102.png" alt=""></p> <p>InheritedWidget ç»„ä»¶çš„æ‰€æœ‰å­ç»„ä»¶éƒ½å¯ä»¥ç›´æ¥é€šè¿‡ <strong>BuildContext.dependOnInheritedWidgetOfExactType</strong> è·å–æ•°æ®ã€‚</p> <h3 id="inheritedwidget-åŸºæœ¬ç”¨æ³•"><a href="#inheritedwidget-%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95" class="header-anchor">#</a> InheritedWidget åŸºæœ¬ç”¨æ³•</h3> <p>ä¸Šé¢åˆ†æäº† InheritedWidget ç»„ä»¶çš„ä½¿ç”¨åœºæ™¯ï¼Œä¸‹é¢ç”¨ä¸€ä¸ªæœ€ç®€å•çš„ demo å±•ç¤ºå¦‚ä½•ä½¿ç”¨  InheritedWidget ç»„ä»¶ã€‚</p> <p>å®šä¸€ä¸ªç”¨æˆ·ä¿¡æ¯å…±äº«æ•°æ®çš„å®ä½“ç±»ï¼Œä»»ä½•å­ç»„ä»¶éƒ½å¯ä»¥è·å–ç”¨æˆ·ä¿¡æ¯ï¼Œç”¨æˆ·ä¿¡æ¯å®ä½“ç±»ï¼š</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">class</span> <span class="token class-name">UserInfo</span> <span class="token punctuation">{</span>
  String name<span class="token punctuation">;</span>
  int age<span class="token punctuation">;</span>

  <span class="token function">UserInfo</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token metadata symbol">@override</span>
  bool <span class="token keyword">operator</span> <span class="token operator">==</span><span class="token punctuation">(</span>Object other<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>other <span class="token operator">is</span> UserInfo<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">var</span> old <span class="token operator">=</span> other <span class="token operator">as</span> UserInfo<span class="token punctuation">;</span>
    <span class="token keyword">return</span> name <span class="token operator">==</span> old<span class="token punctuation">.</span>name <span class="token operator">&amp;&amp;</span> age <span class="token operator">==</span> old<span class="token punctuation">.</span>age<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>UserInfo ç±»é‡å†™äº† <strong>==</strong> æ“ä½œç¬¦ï¼Œæ˜¯ä¸ºäº†åé¢æ•°æ®æ˜¯å¦å‘ç”Ÿå˜åŒ–åšåˆ¤æ–­ã€‚</p> <p>å®šä¹‰å…±äº« UserInfo æ•°æ®çš„ InheritedWidget ç»„ä»¶ã€‚</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">class</span> <span class="token class-name">MyInheritedWidget</span> <span class="token keyword">extends</span> <span class="token class-name">InheritedWidget</span> <span class="token punctuation">{</span>
  <span class="token keyword">final</span> UserInfo userInfo<span class="token punctuation">;</span>

  <span class="token function">MyInheritedWidget</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>userInfo<span class="token punctuation">,</span> Widget child<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">super</span><span class="token punctuation">(</span>child<span class="token punctuation">:</span> child<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">static</span> MyInheritedWidget <span class="token function">of</span><span class="token punctuation">(</span>BuildContext context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> context<span class="token punctuation">.</span>dependOnInheritedWidgetOfExactType<span class="token operator">&lt;</span>MyInheritedWidget<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token metadata symbol">@override</span>
  bool <span class="token function">updateShouldNotify</span><span class="token punctuation">(</span>covariant MyInheritedWidget oldWidget<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> oldWidget<span class="token punctuation">.</span>userInfo <span class="token operator">!=</span> userInfo<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>è¿™é‡Œæœ‰ä¸¤ä¸ªåœ°æ–¹éœ€è¦æ³¨æ„:</p> <ol><li><p>é™æ€(static) <strong>of</strong> æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¸æ˜¯å¿…é¡»çš„ï¼Œä½†ä¸€èˆ¬éƒ½ä¼šæ·»åŠ æ­¤æ–¹æ³•ï¼Œæ–¹ä¾¿å…¶å­ç»„ä»¶è°ƒç”¨ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ç›´æ¥åœ¨å­ç»„ä»¶ä¸­ä½¿ç”¨ <strong>context.dependOnInheritedWidgetOfExactType</strong> æ–¹æ³•ï¼Œä¸åŠ  <strong>of</strong> æ–¹æ³•ï¼Œå­ç»„ä»¶è°ƒç”¨å¦‚ä¸‹:</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">class</span> <span class="token class-name">F</span> <span class="token keyword">extends</span> <span class="token class-name">StatelessWidget</span> <span class="token punctuation">{</span>
  <span class="token metadata symbol">@override</span>
  Widget <span class="token function">build</span><span class="token punctuation">(</span>BuildContext context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> myInheritedWidget <span class="token operator">=</span>
        context<span class="token punctuation">.</span>dependOnInheritedWidgetOfExactType<span class="token operator">&lt;</span>MyInheritedWidget<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">'name:${myInheritedWidget.userInfo.name}'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>æ·»åŠ é™æ€(static) <strong>of</strong> æ–¹æ³•ï¼Œç”¨æ³•å¦‚ä¸‹:</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">class</span> <span class="token class-name">F</span> <span class="token keyword">extends</span> <span class="token class-name">StatelessWidget</span> <span class="token punctuation">{</span>
  <span class="token metadata symbol">@override</span>
  Widget <span class="token function">build</span><span class="token punctuation">(</span>BuildContext context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">'name:${MyInheritedWidget.of(context).userInfo.name}'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>æˆ‘ä»¬ç»å¸¸ä½¿ç”¨çš„ <strong>MediaQuery.of(context)</strong> å’Œ <strong>Theme.of(context)</strong> æ–¹æ³•éƒ½æ˜¯ç³»ç»Ÿå°è£…çš„æ­¤æ–¹æ³•ã€‚</p></li> <li><p><strong>updateShouldNotify</strong> æ–¹æ³•å¿…é¡»é‡å†™ï¼Œæ­¤æ–¹æ³•æ˜¯åˆ¤æ–­æ–°çš„å…±äº«æ•°æ®å’ŒåŸæ•°æ®æ˜¯å¦ä¸€è‡´ï¼Œæ˜¯å¦å°†é€šçŸ¥ä¼ é€’ç»™æ‰€æœ‰å­ç»„ä»¶ï¼ˆå·²æ³¨å†Œï¼‰ã€‚é‡å»ºæ­¤ç»„ä»¶æ—¶ï¼Œæœ‰æ—¶éœ€è¦é‡å»ºç»§æ‰¿ InheritedWidget ç»„ä»¶çš„ç»„ä»¶ï¼Œä½†æœ‰æ—¶ä¸éœ€è¦ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœæ­¤ç»„ä»¶æ‰€ä¿å­˜çš„æ•°æ®ä¸â€œ oldWidgetâ€æ‰€ä¿å­˜çš„æ•°æ®ç›¸åŒï¼Œåˆ™æˆ‘ä»¬æ— éœ€é‡å»ºç»§æ‰¿äº†â€œ oldWidgetâ€æ‰€ä¿å­˜çš„æ•°æ®çš„ç»„ä»¶ã€‚</p></li></ol> <p>ä½¿ç”¨ MyInheritedWidget ç»„ä»¶:</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">class</span> <span class="token class-name">InheritedWidgetDemo</span> <span class="token keyword">extends</span> <span class="token class-name">StatefulWidget</span> <span class="token punctuation">{</span>
  <span class="token metadata symbol">@override</span>
  _InheritedWidgetDemoState <span class="token function">createState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">_InheritedWidgetDemoState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">_InheritedWidgetDemoState</span> <span class="token keyword">extends</span> <span class="token class-name">State</span><span class="token operator">&lt;</span>InheritedWidgetDemo<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token metadata symbol">@override</span>
  Widget <span class="token function">build</span><span class="token punctuation">(</span>BuildContext context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">Scaffold</span><span class="token punctuation">(</span>
      appBar<span class="token punctuation">:</span> <span class="token function">AppBar</span><span class="token punctuation">(</span>
        title<span class="token punctuation">:</span> <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">'InheritedWidget Demo'</span><span class="token punctuation">)</span>ï¼Œ
      <span class="token punctuation">)</span>ï¼Œ
      body<span class="token punctuation">:</span> <span class="token function">Center</span><span class="token punctuation">(</span>
        child<span class="token punctuation">:</span> <span class="token function">MyInheritedWidget</span><span class="token punctuation">(</span>
          userInfo<span class="token punctuation">:</span> <span class="token function">UserInfo</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string">'è€å­Ÿ'</span>ï¼Œ age<span class="token punctuation">:</span> <span class="token number">18</span><span class="token punctuation">)</span>ï¼Œ
          child<span class="token punctuation">:</span> <span class="token function">A</span><span class="token punctuation">(</span>
            child<span class="token punctuation">:</span> <span class="token function">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span>ï¼Œ
          <span class="token punctuation">)</span>ï¼Œ
        <span class="token punctuation">)</span>ï¼Œ
      <span class="token punctuation">)</span>ï¼Œ
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>A ç»„ä»¶ä»£ç :</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token keyword">extends</span> <span class="token class-name">StatelessWidget</span> <span class="token punctuation">{</span>
  <span class="token keyword">final</span> Widget child<span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function">A</span><span class="token punctuation">(</span><span class="token punctuation">{</span>Key keyï¼Œ <span class="token keyword">this</span><span class="token punctuation">.</span>child<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">super</span><span class="token punctuation">(</span>key<span class="token punctuation">:</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token metadata symbol">@override</span>
  Widget <span class="token function">build</span><span class="token punctuation">(</span>BuildContext context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">Center</span><span class="token punctuation">(</span>
      child<span class="token punctuation">:</span> childï¼Œ
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>F ç»„ä»¶ä»£ç :</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">class</span> <span class="token class-name">F</span> <span class="token keyword">extends</span> <span class="token class-name">StatelessWidget</span> <span class="token punctuation">{</span>
  <span class="token metadata symbol">@override</span>
  Widget <span class="token function">build</span><span class="token punctuation">(</span>BuildContext context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">'name:${MyInheritedWidget.of(context).userInfo.name}'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>ä¸Šé¢ä»£ç æ„æˆçš„ç»„ä»¶æ ‘ä¸ºï¼ˆæ— å…³çš„èŠ‚ç‚¹å·²å¿½ç•¥æ¯”å¦‚Scaffoldã€Centerç­‰ï¼‰:</p> <p><img src="http://img.laomengit.com/20210117145109.png" alt=""></p> <blockquote><p>æ³¨æ„: A ç»„ä»¶æ˜¯ä¸ºäº†è¡¨ç¤ºæ ‘çš„æ·±åº¦ï¼Œæ­¤ Demo ä¸­å°†å…¶ç®€åŒ–äº†ï¼Œä»…ä»…è®¾ç½®äº†ä¸€å±‚ï¼Œä¹Ÿå¯ä»¥è®¾å¤šå¤šå±‚ã€‚</p></blockquote> <p>è¿è¡Œæ•ˆæœ:</p> <p><img src="http://img.laomengit.com/20210117145237.png" alt=""></p> <p>ä¸‹é¢ä¿®æ”¹æ•°æ®å¹¶åˆ·æ–°UIï¼Œä¸‹é¢çš„ä»£ç ä»…èƒ½ç”¨äºDemoï¼Œæ˜¯ä¸ºäº†æ¼”ç¤ºæ–¹ä¾¿ï¼Œåƒä¸‡ä¸è¦ç”¨äºå®é™…é¡¹ç›®ï¼Œå› ä¸ºä¸‹é¢çš„å†™æ³•æœ‰å·¨å¤§çš„æ€§èƒ½é—®é¢˜ï¼Œå› ä¸ºé‡å»ºäº† InheritedWidget ç»„ä»¶ä¸‹çš„æ‰€æœ‰å­ç»„ä»¶ï¼Œé‡è¦çš„äº‹æƒ…è¯´3éï¼š<strong>ä¸‹é¢æ¼”ç¤ºDemoåƒä¸‡ä¸è¦ç”¨äºå®é™…é¡¹ç›®</strong>ï¼Œ<strong>åƒä¸‡ä¸è¦ç”¨äºå®é™…é¡¹ç›®</strong>ï¼Œ<strong>åƒä¸‡ä¸è¦ç”¨äºå®é™…é¡¹ç›®</strong>ã€‚æ–‡ç« æœ€åæˆ‘ä¼šç»™å‡ºæ­£ç¡®ç”¨æ³•ã€‚</p> <p>ä¿®æ”¹ <strong>_InheritedWidgetDemoState</strong> ï¼š</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">class</span> <span class="token class-name">_InheritedWidgetDemoState</span> <span class="token keyword">extends</span> <span class="token class-name">State</span><span class="token operator">&lt;</span>InheritedWidgetDemo<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  UserInfo _userInfo <span class="token operator">=</span> <span class="token function">UserInfo</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string">'è€å­Ÿ'</span><span class="token punctuation">,</span> age<span class="token punctuation">:</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token metadata symbol">@override</span>
  Widget <span class="token function">build</span><span class="token punctuation">(</span>BuildContext context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">Scaffold</span><span class="token punctuation">(</span>
      appBar<span class="token punctuation">:</span> <span class="token function">AppBar</span><span class="token punctuation">(</span>
        title<span class="token punctuation">:</span> <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">'InheritedWidget Demo'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
      body<span class="token punctuation">:</span> <span class="token function">Center</span><span class="token punctuation">(</span>
        child<span class="token punctuation">:</span> <span class="token function">MyInheritedWidget</span><span class="token punctuation">(</span>
          userInfo<span class="token punctuation">:</span> _userInfo<span class="token punctuation">,</span>
          child<span class="token punctuation">:</span> <span class="token function">A</span><span class="token punctuation">(</span>
            child<span class="token punctuation">:</span> <span class="token function">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
      floatingActionButton<span class="token punctuation">:</span> <span class="token function">FloatingActionButton</span><span class="token punctuation">(</span>
        onPressed<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            _userInfo <span class="token operator">=</span> <span class="token function">UserInfo</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string">'è€å­Ÿ1'</span><span class="token punctuation">,</span> age<span class="token punctuation">:</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p><img src="http://img.laomengit.com/20210117145245.gif" alt=""></p> <p>ç‚¹å‡»æŒ‰é’®çš„æ—¶å€™ï¼ŒUIåˆ·æ–°äº†ï¼Œä½†è¯·é‡ç‚¹çœ‹å³ä¾§ <strong>rebuild stats</strong> éƒ¨åˆ†ï¼Œæ¯ç‚¹å‡»ä¸€æ¬¡æŒ‰é’®ï¼ŒMyInheritedWidget ç»„ä»¶åŠå…¶å­ç»„ä»¶å…¨éƒ¨ <strong>é‡æ–°æ„å»ºï¼ˆrebuildï¼‰</strong>ï¼Œä½† A ç»„ä»¶å¹¶ä¸ä¾èµ–äº MyInheritedWidget å…±äº«æ•°æ®ï¼Œç†æƒ³æƒ…å†µä¸‹ä¸åº”è¯¥ rebuildï¼Œå®é™…é¡¹ç›®ä¸­ï¼Œæ ‘çš„ç»“æ„ä¼šæ¯”è¿™ä¸ªå¤æ‚çš„å¤šï¼Œå› æ­¤å…¨éƒ¨ rebuild ä¼šé€ æˆæ€§èƒ½é—®é¢˜ï¼Œè¿™ä¹Ÿæ˜¯å¼€å¤´è¯´åƒä¸‡ä¸è¦å°†æ­¤æ–¹å¼ç”¨äºå®é™…é¡¹ç›®ï¼Œç½‘ä¸Šå……æ–¥ç€å¤§é‡æ­¤ç§ç”¨æ³•çš„æ–‡ç« ï¼Œåé¢ä¼šç»™å‡ºæ­£ç¡®ç”¨æ³•ï¼Œæ­£ç¡®ç”¨æ³•æ¯”è¾ƒå¤æ‚ï¼Œè€Œä¸”æ¶‰åŠå…¶ä»–ç›¸å…³çŸ¥è¯†ï¼Œæ‰€ä»¥æ­¤å¤„çš„Demoä»…ç”¨äºå­¦ä¹  InheritedWidgetã€‚</p> <p>å¤§å®¶æ˜¯å¦è¿˜è®°å¾— <a href="../blog/20201227/Stateful%E7%BB%84%E4%BB%B6%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.html" target="_blank" rel="noopener noreferrer">Stateful ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> æ–‡ç« ä¸­ä»‹ç»çš„ <strong>didChangeDependencies</strong> ç”Ÿå‘½å‘¨æœŸï¼Œå¯¹å…¶çš„ä»‹ç»å¦‚ä¸‹ï¼š</p> <blockquote><p>didChangeDependencies æ–¹æ³•åœ¨ initState ä¹‹åç”± Framework ç«‹å³è°ƒç”¨ã€‚å¦å¤–ï¼Œå½“æ­¤ <strong>State</strong> å¯¹è±¡çš„ä¾èµ–é¡¹æ›´æ”¹æ—¶è¢«è°ƒç”¨ï¼Œæ¯”å¦‚å…¶æ‰€ä¾èµ–çš„ <strong>InheritedWidget</strong> å‘ç”Ÿå˜åŒ–æ—¶ï¼Œ Framework ä¼šè°ƒç”¨æ­¤æ–¹æ³•é€šçŸ¥ç»„ä»¶å‘ç”Ÿå˜åŒ–ã€‚</p></blockquote> <p>ä¸‹é¢å°† A å’Œ F ç»„ä»¶æ”¹ä¸º StatefulWidget ç»„ä»¶ï¼š</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">class</span> <span class="token class-name">F</span> <span class="token keyword">extends</span> <span class="token class-name">StatefulWidget</span> <span class="token punctuation">{</span>
  <span class="token metadata symbol">@override</span>
  _FState <span class="token function">createState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">_FState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">_FState</span> <span class="token keyword">extends</span> <span class="token class-name">State</span><span class="token operator">&lt;</span>F<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token metadata symbol">@override</span>
  <span class="token keyword">void</span> <span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">'F initState'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token metadata symbol">@override</span>
  Widget <span class="token function">build</span><span class="token punctuation">(</span>BuildContext context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">'F build'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">'name:${MyInheritedWidget.of(context).userInfo.name}'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token metadata symbol">@override</span>
  <span class="token keyword">void</span> <span class="token function">didChangeDependencies</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">didChangeDependencies</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">'F didChangeDependencies'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token metadata symbol">@override</span>
  <span class="token keyword">void</span> <span class="token function">dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">'F dispose'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token keyword">extends</span> <span class="token class-name">StatefulWidget</span> <span class="token punctuation">{</span>
  <span class="token keyword">final</span> Widget child<span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function">A</span><span class="token punctuation">(</span><span class="token punctuation">{</span>Key key<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>child<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">super</span><span class="token punctuation">(</span>key<span class="token punctuation">:</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token metadata symbol">@override</span>
  _AState <span class="token function">createState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">_AState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">_AState</span> <span class="token keyword">extends</span> <span class="token class-name">State</span><span class="token operator">&lt;</span>A<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token metadata symbol">@override</span>
  <span class="token keyword">void</span> <span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">'A initState'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token metadata symbol">@override</span>
  Widget <span class="token function">build</span><span class="token punctuation">(</span>BuildContext context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">'A build'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">Center</span><span class="token punctuation">(</span>
      child<span class="token punctuation">:</span> widget<span class="token punctuation">.</span>child<span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token metadata symbol">@override</span>
  <span class="token keyword">void</span> <span class="token function">didChangeDependencies</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">didChangeDependencies</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">'A didChangeDependencies'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token metadata symbol">@override</span>
  <span class="token keyword">void</span> <span class="token function">dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">'A dispose'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br></div></div><p>ç»™å„ä¸ªç”Ÿå‘½å‘¨æœŸæ·»åŠ æ—¥å¿—æ‰“å°ï¼Œé‡æ–°è¿è¡Œï¼Œç‚¹å‡»æŒ‰é’®ï¼Œè¾“å‡ºæ—¥å¿—å¦‚ä¸‹ï¼š</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code>flutter<span class="token punctuation">:</span> A build
flutter<span class="token punctuation">:</span> F didChangeDependencies
flutter<span class="token punctuation">:</span> F build
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>å› æ­¤ï¼Œä¾èµ– MyInheritedWidget ç»„ä»¶çš„ F ç»„ä»¶è°ƒç”¨ <strong>didChangeDependencies</strong> æ–¹æ³•ï¼Œè€Œ A ç»„ä»¶æ²¡æœ‰è°ƒç”¨ <strong>didChangeDependencies</strong> æ–¹æ³•ï¼Œå› ä¸º A æ²¡æœ‰ä¾èµ– MyInheritedWidget ç»„ä»¶ã€‚</p> <p>ä¸‹é¢å†è¯´ä¸€ä¸ªéå¸¸å®¹æ˜“å¿½ç•¥çš„åœ°æ–¹ <strong>MyInheritedWidget.updateShouldNotify</strong>æ–¹æ³•ï¼Œä¸€èˆ¬è¿™æ ·å†™ï¼š</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token metadata symbol">@override</span>
bool <span class="token function">updateShouldNotify</span><span class="token punctuation">(</span>covariant MyInheritedWidget oldWidget<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> oldWidget<span class="token punctuation">.</span>userInfo <span class="token operator">!=</span> userInfo<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>è¿™æ ·å†™æœ‰ä»€ä¹ˆé—®é¢˜å—ï¼Ÿå¦‚æœæ•°æ®ï¼ˆuserInfoï¼‰æ˜¯è‡ªå®šä¹‰çš„å®ä½“ç±»ä¸”æœªåœ¨ UserInfo ä¸­é‡å†™ <strong>==</strong>ï¼Œé‚£ä¹ˆæå¤§æ¦‚ç‡å‡ºç°æœ‰é—®é¢˜ï¼Œå› ä¸ºä¸é‡å†™ <strong>==</strong> æ“ä½œç¬¦æ–¹æ³•ï¼Œä½¿ç”¨ <strong>!=</strong> åˆ¤æ–­æ˜¯å¦ç›¸ç­‰çš„æ—¶å€™åˆ¤æ–­çš„æ˜¯ä¸¤ä¸ªå¯¹è±¡çš„å†…å­˜åœ°å€ï¼Œä¸‹é¢å°† UserInfo ä¸­  <strong>==</strong> æ–¹æ³•å»æ‰ï¼Œ</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">class</span> <span class="token class-name">UserInfo</span> <span class="token punctuation">{</span>
  String name<span class="token punctuation">;</span>
  int age<span class="token punctuation">;</span>

  <span class="token function">UserInfo</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>ä¿®æ”¹ _InheritedWidgetDemoState ç±»ï¼š</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">class</span> <span class="token class-name">_InheritedWidgetDemoState</span> <span class="token keyword">extends</span> <span class="token class-name">State</span><span class="token operator">&lt;</span>InheritedWidgetDemo<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  UserInfo _userInfo <span class="token operator">=</span> <span class="token function">UserInfo</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string">'è€å­Ÿ'</span><span class="token punctuation">,</span> age<span class="token punctuation">:</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token metadata symbol">@override</span>
  Widget <span class="token function">build</span><span class="token punctuation">(</span>BuildContext context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">Scaffold</span><span class="token punctuation">(</span>
      appBar<span class="token punctuation">:</span> <span class="token function">AppBar</span><span class="token punctuation">(</span>
        title<span class="token punctuation">:</span> <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">'InheritedWidget Demo'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
      body<span class="token punctuation">:</span> <span class="token function">Center</span><span class="token punctuation">(</span>
        child<span class="token punctuation">:</span> <span class="token function">MyInheritedWidget</span><span class="token punctuation">(</span>
          userInfo<span class="token punctuation">:</span> _userInfo<span class="token punctuation">,</span>
          child<span class="token punctuation">:</span> <span class="token function">A</span><span class="token punctuation">(</span>
            child<span class="token punctuation">:</span> <span class="token function">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
      floatingActionButton<span class="token punctuation">:</span> <span class="token function">FloatingActionButton</span><span class="token punctuation">(</span>
        onPressed<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            _userInfo <span class="token operator">=</span> <span class="token function">UserInfo</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string">'è€å­Ÿ'</span><span class="token punctuation">,</span> age<span class="token punctuation">:</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p>ä¿®æ”¹ <strong>updateShouldNotify</strong> æ–¹æ³•ï¼Œæ·»åŠ æ—¥å¿—æ‰“å°ï¼š</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token metadata symbol">@override</span>
bool <span class="token function">updateShouldNotify</span><span class="token punctuation">(</span>covariant MyInheritedWidget oldWidget<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  bool flag <span class="token operator">=</span> oldWidget<span class="token punctuation">.</span>userInfo <span class="token operator">!=</span> userInfo<span class="token punctuation">;</span>
  <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">'updateShouldNotify:$flag'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> flag<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>ç‚¹å‡»æŒ‰é’®ï¼Œ_userInfo å¯¹è±¡å¼•ç”¨å‘ç”Ÿäº†å˜åŒ–ï¼Œä½†å…¶å€¼ï¼ˆ name å’Œ ageï¼‰éƒ½æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œ<strong>updateShouldNotify</strong> åº”è¯¥è¿”å›falseï¼Œä½†å®é™…æ‰“å°çš„ç»“æœï¼š</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code>flutter<span class="token punctuation">:</span> updateShouldNotify<span class="token punctuation">:</span><span class="token boolean">true</span>
flutter<span class="token punctuation">:</span> A build
flutter<span class="token punctuation">:</span> F didChangeDependencies
flutter<span class="token punctuation">:</span> F build
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>å®é™…è¿”å›äº† trueï¼Œå› ä¸ºå‰å _userInfo å¯¹è±¡å¼•ç”¨å‘ç”Ÿäº†å˜åŒ–ï¼Œåœ¨ UserInfo ä¸­é‡å†™ <strong>==</strong>ï¼Œæ¯”è¾ƒå…·ä½“çš„name å’Œ age æ˜¯å¦ç›¸ç­‰ï¼š</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token metadata symbol">@override</span>
bool <span class="token keyword">operator</span> <span class="token operator">==</span><span class="token punctuation">(</span>Object other<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>other <span class="token operator">is</span> UserInfo<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">var</span> old <span class="token operator">=</span> other <span class="token operator">as</span> UserInfo<span class="token punctuation">;</span>
  <span class="token keyword">return</span> name <span class="token operator">==</span> old<span class="token punctuation">.</span>name <span class="token operator">&amp;&amp;</span> age <span class="token operator">==</span> old<span class="token punctuation">.</span>age<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>å†æ¬¡è¿è¡Œï¼Œæ—¥å¿—å¦‚ä¸‹ï¼š</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code>flutter<span class="token punctuation">:</span> updateShouldNotify<span class="token punctuation">:</span><span class="token boolean">false</span>
flutter<span class="token punctuation">:</span> A build
flutter<span class="token punctuation">:</span> F build
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>è¿˜æœ‰ä¸€ç§é”™è¯¯å†™æ³•ï¼š</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">class</span> <span class="token class-name">_InheritedWidgetDemoState</span> <span class="token keyword">extends</span> <span class="token class-name">State</span><span class="token operator">&lt;</span>InheritedWidgetDemo<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  UserInfo _userInfo <span class="token operator">=</span> <span class="token function">UserInfo</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string">'è€å­Ÿ'</span><span class="token punctuation">,</span> age<span class="token punctuation">:</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token metadata symbol">@override</span>
  Widget <span class="token function">build</span><span class="token punctuation">(</span>BuildContext context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">Scaffold</span><span class="token punctuation">(</span>
      appBar<span class="token punctuation">:</span> <span class="token function">AppBar</span><span class="token punctuation">(</span>
        title<span class="token punctuation">:</span> <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">'InheritedWidget Demo'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
      body<span class="token punctuation">:</span> <span class="token function">Center</span><span class="token punctuation">(</span>
        child<span class="token punctuation">:</span> <span class="token function">MyInheritedWidget</span><span class="token punctuation">(</span>
          userInfo<span class="token punctuation">:</span> _userInfo<span class="token punctuation">,</span>
          child<span class="token punctuation">:</span> <span class="token function">A</span><span class="token punctuation">(</span>
            child<span class="token punctuation">:</span> <span class="token function">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
      floatingActionButton<span class="token punctuation">:</span> <span class="token function">FloatingActionButton</span><span class="token punctuation">(</span>
        onPressed<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            _userInfo<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'è€å­Ÿ1'</span><span class="token punctuation">;</span>
            <span class="token comment">// _userInfo = UserInfo(name: 'è€å­Ÿ', age: 18);</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p>é‡ç‚¹çœ‹è¿™éƒ¨åˆ†ä¿®æ”¹ï¼š</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code>floatingActionButton<span class="token punctuation">:</span> <span class="token function">FloatingActionButton</span><span class="token punctuation">(</span>
        onPressed<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            _userInfo<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'è€å­Ÿ1'</span><span class="token punctuation">;</span>
            <span class="token comment">// _userInfo = UserInfo(name: 'è€å­Ÿ', age: 18);</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>å°† <strong>_userInfo = UserInfo(name: 'è€å­Ÿ', age: 18)</strong> ä¿®æ”¹ä¸º <strong>_userInfo.name = 'è€å­Ÿ1'</strong>ï¼ŒçŒœçŒœ updateShouldNotify è¿”å›æ˜¯ true or falseï¼Ÿ</p> <p>è¿è¡Œæ—¥å¿—ï¼š</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code>flutter<span class="token punctuation">:</span> updateShouldNotify<span class="token punctuation">:</span><span class="token boolean">false</span>
flutter<span class="token punctuation">:</span> A build
flutter<span class="token punctuation">:</span> F build
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>æ˜¯ä¸æ˜¯æ„Ÿè§‰éå¸¸ä¸å¯æ€è®®ï¼Œä¸¤æ¬¡çš„ <strong>name</strong> å€¼ä¸ä¸€æ ·å•Šï¼Ÿ</p> <p>é‚£æ˜¯å› ä¸º <strong>_userInfo.name = 'è€å­Ÿ1'</strong> ä¹Ÿä¿®æ”¹äº† oldWidget çš„_userInfoï¼Œå‰åä¸¤æ¬¡éƒ½æŒ‡å‘äº†åŒä¸€ä¸ªå¯¹è±¡å¼•ç”¨ã€‚</p> <p>å¾ˆå¤šäººåº”è¯¥ä¼šæœ‰è¿™æ ·ä¸€ä¸ªç–‘é—®ï¼Œå‡è®¾è®¾ç½® updateShouldNotify è¿”å›falseï¼Œç‚¹å‡»çš„æ—¶å€™UIä¹Ÿä¼šæ›´æ”¹ï¼Œå› ä¸ºæ•´é¢—æ ‘éƒ½ rebuild äº†ï¼Œé‚£ä¹ˆ updateShouldNotify ç”±ä»€ä¹ˆæ„ä¹‰å‘¢ï¼Ÿ</p> <p>è‚¯å®šæ˜¯æœ‰æ„ä¹‰çš„ï¼Œçœ‹å¦‚ä¸‹åœºæ™¯ï¼ŒF ç»„ä»¶ä½¿ç”¨ InheritedWidget çš„å…±äº«æ•°æ®è®¿é—®æœåŠ¡å™¨æ¥å£ï¼Œè·å–æœåŠ¡å™¨æ•°æ®å¹¶å±•ç¤ºï¼Œå¦‚æœ updateShouldNotify è¿”å› falseï¼Œé‚£ä¹ˆ F ç»„ä»¶ rebuild æ—¶åªä¼šæ‰§è¡Œ <strong>build</strong> å‡½æ•°ï¼Œè€Œè®¿é—®æœåŠ¡å™¨æ¥å£æ˜¯ä¸€ä¸ªè€—æ—¶å·¥ä½œï¼Œè€ƒè™‘æ€§èƒ½å› ç´ ï¼Œä¸èƒ½å°†è®¿é—®æœåŠ¡å™¨æ¥å£æ”¾åœ¨ <strong>build</strong> å‡½æ•°ä¸­ï¼Œé‚£ä¹ˆ InheritedWidget æ•°æ®çš„æ›´æ–°å°±æ— æ³•æ›´æ–°å…¶ä¾èµ–çš„ç»„ä»¶ï¼Œè€Œ updateShouldNotify è¿”å› trueæ—¶ï¼Œ F ç»„ä»¶ rebuild æ—¶ä¼šæ‰§è¡Œ <strong>didChangeDependencies</strong> å’Œ  <strong>build</strong> å‡½æ•°ï¼Œæ­¤æ—¶å¯ä»¥å°†è®¿é—®æœåŠ¡å™¨æ¥å£æ”¾åœ¨ <strong>didChangeDependencies</strong> å‡½æ•°ä¸­ï¼Œè¿™ä¹Ÿæ˜¯ didChangeDependencies ç”Ÿå‘½å‘¨æœŸå­˜åœ¨çš„æ„ä¹‰ã€‚</p> <p>ä¸‹é¢<strong>é‡ç‚¹æ¥äº†</strong>ï¼Œé‚£ä¹ˆå¦‚ä½•æ­£ç¡®ä½¿ç”¨ <strong>InheritedWidget</strong> ç»„ä»¶ï¼Œç­”æ¡ˆæ˜¯ <strong>InheritedWidget + ValueNotifier</strong>ï¼Œå…³äº ****çš„ç”¨æ³•å¯ä»¥åˆ°æˆ‘çš„ä¸ªäººåšå®¢ä¸­æŸ¥çœ‹ï¼Œåœ°å€ï¼š<a href="../flutter/widgets/ValueListenableBuilder.html" target="_blank" rel="noopener noreferrer">http://laomengit.com/flutter/widgets/ValueListenableBuilder.html<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> ï¼Œè¿™é‡Œä¸è¯¦ç»†å±•å¼€ä»‹ç»ã€‚</p> <p>ä¿®æ”¹ <strong>MyInheritedWidget</strong> ä»£ç ï¼š</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">class</span> <span class="token class-name">MyInheritedWidget</span> <span class="token keyword">extends</span> <span class="token class-name">InheritedWidget</span> <span class="token punctuation">{</span>
  ValueNotifier<span class="token operator">&lt;</span>UserInfo<span class="token operator">&gt;</span> _valueNotifier<span class="token punctuation">;</span>

  ValueNotifier<span class="token operator">&lt;</span>UserInfo<span class="token operator">&gt;</span> <span class="token keyword">get</span> valueNotifier <span class="token operator">=</span><span class="token operator">&gt;</span> _valueNotifier<span class="token punctuation">;</span>

  <span class="token function">MyInheritedWidget</span><span class="token punctuation">(</span>UserInfo userInfo<span class="token punctuation">,</span> <span class="token punctuation">{</span>Widget child<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">super</span><span class="token punctuation">(</span>child<span class="token punctuation">:</span> child<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    _valueNotifier <span class="token operator">=</span> ValueNotifier<span class="token operator">&lt;</span>UserInfo<span class="token operator">&gt;</span><span class="token punctuation">(</span>userInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">static</span> MyInheritedWidget <span class="token function">of</span><span class="token punctuation">(</span>BuildContext context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> context<span class="token punctuation">.</span>getElementForInheritedWidgetOfExactType<span class="token operator">&lt;</span>MyInheritedWidget<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>widget<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">void</span> <span class="token function">updateData</span><span class="token punctuation">(</span>UserInfo info<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    _valueNotifier<span class="token punctuation">.</span>value <span class="token operator">=</span> info<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token metadata symbol">@override</span>
  bool <span class="token function">updateShouldNotify</span><span class="token punctuation">(</span>covariant MyInheritedWidget oldWidget<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>ä¸»è¦çš„å˜åŒ–æ˜¯ï¼š</p> <ul><li><p>å…±äº«æ•°æ®ç”± UserInfo ç±»å‹å˜ä¸ºäº† ValueNotifier&lt;UserInfo&gt;ã€‚</p></li> <li><p>å¢åŠ äº†æ›´æ–°æ•°æ®çš„æ–¹æ³• <strong>updateData</strong>ã€‚</p></li> <li><p><strong>updateShouldNotify</strong> æ–¹æ³•ç›´æ¥è¿”å›äº† falseï¼Œå› ä¸ºæ•°æ®çš„æ›´æ–°é€šè¿‡ ValueNotifier å®ç°ã€‚</p></li> <li><p>é™æ€æ–¹æ³• <strong>of</strong> ç”±</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">static</span> MyInheritedWidget <span class="token function">of</span><span class="token punctuation">(</span>BuildContext context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> context<span class="token punctuation">.</span>dependOnInheritedWidgetOfExactType<span class="token operator">&lt;</span>MyInheritedWidget<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>æ”¹ä¸º</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">static</span> MyInheritedWidget <span class="token function">of</span><span class="token punctuation">(</span>BuildContext context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> context<span class="token punctuation">.</span>getElementForInheritedWidgetOfExactType<span class="token operator">&lt;</span>MyInheritedWidget<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>widget<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>åŒºåˆ«æ˜¯ <strong>dependOnInheritedWidgetOfExactType</strong> æ³¨å†Œäº†ä¾èµ–å…³ç³»ï¼Œè€Œ <strong>getElementForInheritedWidgetOfExactType</strong> æœªæ³¨å†Œï¼Œåé¢çš„æºç éƒ¨åˆ†ä¼šè¯¦ç»†åˆ†æã€‚</p></li></ul> <p>ä¿®æ”¹ F ç»„ä»¶çš„ä»£ç ï¼š</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">class</span> <span class="token class-name">F</span> <span class="token keyword">extends</span> <span class="token class-name">StatefulWidget</span> <span class="token punctuation">{</span>
  <span class="token metadata symbol">@override</span>
  _FState <span class="token function">createState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">_FState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">_FState</span> <span class="token keyword">extends</span> <span class="token class-name">State</span><span class="token operator">&lt;</span>F<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token metadata symbol">@override</span>
  <span class="token keyword">void</span> <span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">'F initState'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token metadata symbol">@override</span>
  <span class="token keyword">void</span> <span class="token function">didChangeDependencies</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">didChangeDependencies</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">'F didChangeDependencies'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token metadata symbol">@override</span>
  Widget <span class="token function">build</span><span class="token punctuation">(</span>BuildContext context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">'F build'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">ValueListenableBuilder</span><span class="token punctuation">(</span>
      builder<span class="token punctuation">:</span> <span class="token punctuation">(</span>context<span class="token punctuation">,</span> UserInfo value<span class="token punctuation">,</span> child<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">'${value.name}'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      valueListenable<span class="token punctuation">:</span> MyInheritedWidget<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">.</span>valueNotifier<span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token metadata symbol">@override</span>
  <span class="token keyword">void</span> <span class="token function">dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">'F dispose'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><p>å˜åŒ–ï¼š</p> <ul><li>ä¾èµ–å…±äº«æ•°æ®çš„Textç»„ä»¶æ·»åŠ äº† <strong>ValueListenableBuilder</strong> ç»„ä»¶ï¼Œæ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œé‡æ–°æ‰§è¡Œ builder ã€‚</li></ul> <p><strong>_InheritedWidgetDemoState</strong> ä»£ç ä¿®æ”¹å¦‚ä¸‹ï¼š</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token metadata symbol">@override</span>
Widget <span class="token function">build</span><span class="token punctuation">(</span>BuildContext context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">MyInheritedWidget</span><span class="token punctuation">(</span><span class="token function">UserInfo</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string">'è€å­Ÿ'</span><span class="token punctuation">,</span> age<span class="token punctuation">:</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">,</span> child<span class="token punctuation">:</span> <span class="token function">Builder</span><span class="token punctuation">(</span>
    builder<span class="token punctuation">:</span> <span class="token punctuation">(</span>context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token function">Scaffold</span><span class="token punctuation">(</span>
        appBar<span class="token punctuation">:</span> <span class="token function">AppBar</span><span class="token punctuation">(</span>
          title<span class="token punctuation">:</span> <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">'InheritedWidget Demo'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
        body<span class="token punctuation">:</span> <span class="token function">Center</span><span class="token punctuation">(</span>
          child<span class="token punctuation">:</span> <span class="token function">A</span><span class="token punctuation">(</span>
            child<span class="token punctuation">:</span> <span class="token function">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
        floatingActionButton<span class="token punctuation">:</span> <span class="token function">FloatingActionButton</span><span class="token punctuation">(</span>
          onPressed<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            MyInheritedWidget<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">updateData</span><span class="token punctuation">(</span><span class="token function">UserInfo</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string">'è€å­Ÿ${_clickCount++}'</span><span class="token punctuation">,</span> age<span class="token punctuation">:</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>è¿è¡Œæ•ˆæœï¼š</p> <p><img src="http://img.laomengit.com/20210117145306.gif" alt=""></p> <p>é‡ç‚¹çœ‹  <strong>rebuild</strong> çš„ç»„ä»¶ï¼Œæ— å…³çš„ç»„ä»¶ï¼ˆæ¯”å¦‚ Aï¼‰æ²¡æœ‰ <strong>rebuild</strong>ã€‚</p> <p>å½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨ <strong>Provider</strong> å®ç°å­ç»„ä»¶æ›´æ–°ï¼Œå¢åŠ  <strong>UserInfoModel</strong>ï¼š</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">class</span> <span class="token class-name">UserInfoModel</span> <span class="token keyword">extends</span> <span class="token class-name">ChangeNotifier</span> <span class="token punctuation">{</span>
  <span class="token function">UserInfoModel</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_userInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>

  UserInfo _userInfo<span class="token punctuation">;</span>

  UserInfo <span class="token keyword">get</span> userInfo <span class="token operator">=</span><span class="token operator">&gt;</span> _userInfo<span class="token punctuation">;</span>

  <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span>UserInfo userInfo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    _userInfo <span class="token operator">=</span> userInfo<span class="token punctuation">;</span>
    <span class="token function">notifyListeners</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>ä¿®æ”¹ <strong>_InheritedWidgetDemoState</strong>ï¼š</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">class</span> <span class="token class-name">_InheritedWidgetDemoState</span> <span class="token keyword">extends</span> <span class="token class-name">State</span><span class="token operator">&lt;</span>InheritedWidgetDemo<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  int _clickCount <span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>

  <span class="token metadata symbol">@override</span>
  Widget <span class="token function">build</span><span class="token punctuation">(</span>BuildContext context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">MultiProvider</span><span class="token punctuation">(</span>
      providers<span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token function">ChangeNotifierProvider</span><span class="token punctuation">(</span>
            create<span class="token punctuation">:</span> <span class="token punctuation">(</span>_<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">UserInfoModel</span><span class="token punctuation">(</span><span class="token function">UserInfo</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string">'è€å­Ÿ'</span><span class="token punctuation">,</span> age<span class="token punctuation">:</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      builder<span class="token punctuation">:</span> <span class="token punctuation">(</span>context<span class="token punctuation">,</span> child<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">Scaffold</span><span class="token punctuation">(</span>
          appBar<span class="token punctuation">:</span> <span class="token function">AppBar</span><span class="token punctuation">(</span>
            title<span class="token punctuation">:</span> <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">'InheritedWidget Demo'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token punctuation">)</span><span class="token punctuation">,</span>
          body<span class="token punctuation">:</span> <span class="token function">Center</span><span class="token punctuation">(</span>
            child<span class="token punctuation">:</span> <span class="token function">A</span><span class="token punctuation">(</span>
              child<span class="token punctuation">:</span> <span class="token function">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token punctuation">)</span><span class="token punctuation">,</span>
          floatingActionButton<span class="token punctuation">:</span> Consumer<span class="token operator">&lt;</span>UserInfoModel<span class="token operator">&gt;</span><span class="token punctuation">(</span>
            builder<span class="token punctuation">:</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> userInfoModel<span class="token punctuation">,</span> child<span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token keyword">return</span> <span class="token function">FloatingActionButton</span><span class="token punctuation">(</span>
                child<span class="token punctuation">:</span> child<span class="token punctuation">,</span>
                onPressed<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                  userInfoModel<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token function">UserInfo</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string">'è€å­Ÿ${_clickCount++}'</span><span class="token punctuation">,</span> age<span class="token punctuation">:</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
              <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><p><img src="http://img.laomengit.com/20210117145320.gif" alt=""></p> <h3 id="inheritedwidget-æºç åˆ†æ"><a href="#inheritedwidget-%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90" class="header-anchor">#</a> InheritedWidget æºç åˆ†æ</h3> <p>åˆ†ææºç çš„æ—¶å€™ä¸€å®šè¦å…ˆæƒ³æƒ³ï¼Œå¦‚æœæ˜¯æˆ‘æ¥å®ç°è¿™ä¸ªç»„ä»¶ï¼Œè¦å¦‚ä½•å®ç°ï¼Ÿ InheritedWidget ç»„ä»¶ä¸»è¦å®ç°äº†ä¸¤ä¸ªåŠŸèƒ½ï¼š</p> <ul><li>å¦‚ä½•å®ç°ç»‘å®šä¾èµ–å®ƒçš„å­ç»„ä»¶</li> <li>å¦‚ä½•é€šçŸ¥å­ç»„ä»¶è‡ªå·±å‘ç”Ÿäº†æ›´æ”¹ã€‚</li></ul> <h4 id="å¦‚ä½•å®ç°ç»‘å®šä¾èµ–å®ƒçš„å­ç»„ä»¶"><a href="#%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%BB%91%E5%AE%9A%E4%BE%9D%E8%B5%96%E5%AE%83%E7%9A%84%E5%AD%90%E7%BB%84%E4%BB%B6" class="header-anchor">#</a> å¦‚ä½•å®ç°ç»‘å®šä¾èµ–å®ƒçš„å­ç»„ä»¶</h4> <p>ä¾èµ–  InheritedWidget çš„å­ç»„ä»¶å¦‚ä½•è·å– InheritedWidget ç»„ä»¶çš„å…±äº«æ•°æ®ï¼Ÿé¦–å…ˆæŸ¥çœ‹è·å–å…±äº«æ•°æ®çš„æ–¹æ³•ï¼š</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code>context<span class="token punctuation">.</span>dependOnInheritedWidgetOfExactType<span class="token operator">&lt;</span>MyInheritedWidget<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>è¿™æ®µä»£ç è·å– <strong>MyInheritedWidget</strong> å®ä¾‹ï¼Œ<strong>dependOnInheritedWidgetOfExactType</strong> æ–¹æ³•æ˜¯ <strong>BuildContext</strong> çš„æ–¹æ³•ï¼Œ<strong>Element</strong> å®ç°äº†æ­¤æ–¹æ³•ï¼š</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token metadata symbol">@override</span>
T dependOnInheritedWidgetOfExactType<span class="token operator">&lt;</span>T <span class="token keyword">extends</span> <span class="token class-name">InheritedWidget</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">{</span>Object aspect<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">assert</span><span class="token punctuation">(</span><span class="token function">_debugCheckStateIsActiveForAncestorLookup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">final</span> InheritedElement ancestor <span class="token operator">=</span> _inheritedWidgets <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token punctuation">:</span> _inheritedWidgets<span class="token punctuation">[</span>T<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>ancestor <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">assert</span><span class="token punctuation">(</span>ancestor <span class="token operator">is</span> InheritedElement<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">dependOnInheritedElement</span><span class="token punctuation">(</span>ancestor<span class="token punctuation">,</span> aspect<span class="token punctuation">:</span> aspect<span class="token punctuation">)</span> <span class="token operator">as</span> T<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  _hadUnsatisfiedDependencies <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>ä»ä¸Šé¢çš„æºä»£ç å¯ä»¥çœ‹å‡ºï¼Œé¦–å…ˆåˆ° <strong>_inheritedWidgets</strong> ä¸­æŸ¥æ‰¾æŒ‡å®šçš„ InheritedElementï¼Œ_inheritedWidgets è¿™ä¸ª Map æ˜¯å“ªé‡Œæ¥çš„ï¼Ÿä»€ä¹ˆæ—¶å€™è¢«åˆå§‹åŒ–çš„ï¼Ÿçœ‹ä¸‹ _inheritedWidgets å±æ€§çš„å®šä¹‰ï¼š</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code>Map<span class="token operator">&lt;</span>Type<span class="token punctuation">,</span> InheritedElement<span class="token operator">&gt;</span> _inheritedWidgets<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>æŸ¥æ‰¾å…¶å¼•ç”¨å’Œèµ‹å€¼çš„æºä»£ç ï¼š</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token metadata symbol">@override</span>
<span class="token keyword">void</span> <span class="token function">_updateInheritance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">assert</span><span class="token punctuation">(</span>_active<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">final</span> Map<span class="token operator">&lt;</span>Type<span class="token punctuation">,</span> InheritedElement<span class="token operator">&gt;</span> incomingWidgets <span class="token operator">=</span> _parent<span class="token operator">?</span><span class="token punctuation">.</span>_inheritedWidgets<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>incomingWidgets <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
    _inheritedWidgets <span class="token operator">=</span> HashMap<span class="token operator">&lt;</span>Type<span class="token punctuation">,</span> InheritedElement<span class="token operator">&gt;</span><span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>incomingWidgets<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">else</span>
    _inheritedWidgets <span class="token operator">=</span> HashMap<span class="token operator">&lt;</span>Type<span class="token punctuation">,</span> InheritedElement<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  _inheritedWidgets<span class="token punctuation">[</span>widget<span class="token punctuation">.</span>runtimeType<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>ä¸Šé¢çš„ä»£ç åœ¨ <strong>InheritedElement</strong> ä¸­ï¼Œä½†æ­¤æ–¹æ³•åœ¨ <strong>Element</strong> ä¸­ä¹Ÿå®ç°äº†ï¼š</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">void</span> <span class="token function">_updateInheritance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">assert</span><span class="token punctuation">(</span>_active<span class="token punctuation">)</span><span class="token punctuation">;</span>
  _inheritedWidgets <span class="token operator">=</span> _parent<span class="token operator">?</span><span class="token punctuation">.</span>_inheritedWidgets<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>ä¸Šé¢çš„ä»£ç è¯´æ˜äº†é <strong>InheritedElement</strong> çš„ Element ä¸­ _inheritedWidgets ç­‰äºçˆ¶ç»„ä»¶çš„ _inheritedWidgetsï¼Œè€Œ InheritedElement ä¼šå°†è‡ªèº«æ·»åŠ åˆ° _inheritedWidgets ä¸­ï¼Œç³»ç»Ÿé€šè¿‡æ­¤æ–¹å¼å°†ç»„ä»¶å’Œ InheritedWidgets çš„ä¾èµ–å…³ç³»å±‚å±‚å‘ä¸‹ä¼ é€’ï¼Œæ¯ä¸€ä¸ª Element ä¸­éƒ½å«æœ‰ _inheritedWidgets é›†åˆï¼Œæ­¤é›†åˆä¸­åŒ…å«äº†æ­¤ç»„ä»¶çš„çˆ¶ç»„ä»¶ä¸”æ˜¯InheritedWidgets ç»„ä»¶çš„å¼•ç”¨å…³ç³»ã€‚</p> <p>é‚£ä¹ˆæ˜¯ä»€ä¹ˆæ—¶å€™æ‰§è¡Œçš„ _updateInheritance æ–¹æ³•çš„å‘¢ï¼Ÿé€šè¿‡æŸ¥æ‰¾å…¶å¼•ç”¨ï¼Œå‘ç°åœ¨ <strong>mount</strong> å’Œ <strong>activate</strong> ä¸­è°ƒç”¨äº†  _updateInheritance æ–¹æ³•ã€‚å…³äº <strong>mount</strong> å’Œ <strong>activate</strong> é˜¶æ®µå¯ä»¥æŸ¥çœ‹  <a href="../blog/20201227/Stateful%E7%BB%84%E4%BB%B6%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.html" target="_blank" rel="noopener noreferrer">Stateful ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> æ–‡ç« ã€‚</p> <p>ä¸‹é¢æŸ¥çœ‹ <strong>dependOnInheritedElement</strong> æ–¹æ³•ï¼Œåœ¨æŸ¥æ‰¾åˆ°ä¾èµ–çš„ <strong>InheritedElement</strong> åï¼Œæ‰§è¡Œ <strong>dependOnInheritedElement</strong> æ–¹æ³•ï¼Œæºä»£ç å¦‚ä¸‹ï¼š</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token metadata symbol">@override</span>
InheritedWidget <span class="token function">dependOnInheritedElement</span><span class="token punctuation">(</span>InheritedElement ancestor<span class="token punctuation">,</span> <span class="token punctuation">{</span> Object aspect <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">assert</span><span class="token punctuation">(</span>ancestor <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  _dependencies <span class="token operator">?</span><span class="token operator">?</span><span class="token operator">=</span> HashSet<span class="token operator">&lt;</span>InheritedElement<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  _dependencies<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>ancestor<span class="token punctuation">)</span><span class="token punctuation">;</span>
  ancestor<span class="token punctuation">.</span><span class="token function">updateDependencies</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> aspect<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> ancestor<span class="token punctuation">.</span>widget<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>updateDependencies æ–¹æ³•æºä»£ç å¦‚ä¸‹ï¼š</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token metadata symbol">@protected</span>
<span class="token keyword">void</span> <span class="token function">updateDependencies</span><span class="token punctuation">(</span>Element dependent<span class="token punctuation">,</span> Object aspect<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">setDependencies</span><span class="token punctuation">(</span>dependent<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token metadata symbol">@protected</span>
  <span class="token keyword">void</span> <span class="token function">setDependencies</span><span class="token punctuation">(</span>Element dependent<span class="token punctuation">,</span> Object value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    _dependents<span class="token punctuation">[</span>dependent<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>ä¸Šé¢çš„ä»£ç å°±æ˜¯å‘ <strong>_dependents</strong> ä¸­æ·»åŠ æ³¨å†Œï¼Œ InheritedWidget ç»„ä»¶æ›´æ–°æ—¶å¯ä»¥æ›´å…·æ­¤åˆ—è¡¨é€šçŸ¥å­ç»„ä»¶ã€‚</p> <p>å†æ¥çœ‹ä¸‹çš„ä»£ç ï¼š</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token metadata symbol">@Deprecated</span><span class="token punctuation">(</span>
  <span class="token string">'Use getElementForInheritedWidgetOfExactType instead. '</span>
  <span class="token string">'This feature was deprecated after v1.12.1.'</span>
<span class="token punctuation">)</span>
<span class="token metadata symbol">@override</span>
InheritedElement <span class="token function">ancestorInheritedElementForWidgetOfExactType</span><span class="token punctuation">(</span>Type targetType<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">assert</span><span class="token punctuation">(</span><span class="token function">_debugCheckStateIsActiveForAncestorLookup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">final</span> InheritedElement ancestor <span class="token operator">=</span> _inheritedWidgets <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token punctuation">:</span> _inheritedWidgets<span class="token punctuation">[</span>targetType<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> ancestor<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token metadata symbol">@override</span>
InheritedElement getElementForInheritedWidgetOfExactType<span class="token operator">&lt;</span>T <span class="token keyword">extends</span> <span class="token class-name">InheritedWidget</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">assert</span><span class="token punctuation">(</span><span class="token function">_debugCheckStateIsActiveForAncestorLookup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">final</span> InheritedElement ancestor <span class="token operator">=</span> _inheritedWidgets <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token punctuation">:</span> _inheritedWidgets<span class="token punctuation">[</span>T<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> ancestor<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>åœ¨ v1.12.1 ç‰ˆæœ¬ä»¥å‰ä½¿ç”¨ <strong>ancestorInheritedElementForWidgetOfExactType</strong> æ–¹æ³•ï¼Œç°åœ¨ä½¿ç”¨ <strong>getElementForInheritedWidgetOfExactType</strong> æ–¹æ³•ï¼Œæ­¤æ–¹æ³•å’Œ <strong>dependOnInheritedWidgetOfExactType</strong> æ–¹æ³•çš„å”¯ä¸€å´ä¸å°±æ˜¯ getElementForInheritedWidgetOfExactType æ–¹æ³•æ²¡æœ‰æ³¨å†Œï¼Œä¹Ÿå°±æ˜¯ä½¿ç”¨ getElementForInheritedWidgetOfExactType æ–¹æ³•è·å–å…±äº«æ•°æ®çš„å­ç»„ä»¶ï¼Œä¸ä¼šåœ¨ InheritedWidget ç»„ä»¶é‡å»ºæ—¶è°ƒç”¨ <strong>didChangeDependencies</strong> æ–¹æ³•ã€‚</p> <p>ä¸‹é¢çœ‹çœ‹ä¸ºä»€ä¹ˆ InheritedWidget ç»„ä»¶æ•°æ®æ–¹å¼å˜åŒ–ï¼Œé‡å»ºæ—¶ä¼šè°ƒç”¨å…¶  <strong>didChangeDependencies</strong> æ–¹æ³•ï¼Ÿ</p> <p>å½“ç»„ä»¶å‘ç”Ÿå˜åŒ–æ—¶ä¼šè°ƒç”¨ <strong>update</strong>æ–¹æ³•ï¼š</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token metadata symbol">@override</span>
<span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span>ProxyWidget newWidget<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">final</span> ProxyWidget oldWidget <span class="token operator">=</span> widget<span class="token punctuation">;</span>
  <span class="token keyword">assert</span><span class="token punctuation">(</span>widget <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">assert</span><span class="token punctuation">(</span>widget <span class="token operator">!=</span> newWidget<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>newWidget<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">assert</span><span class="token punctuation">(</span>widget <span class="token operator">==</span> newWidget<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">updated</span><span class="token punctuation">(</span>oldWidget<span class="token punctuation">)</span><span class="token punctuation">;</span>
  _dirty <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token function">rebuild</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>InheritedElement é‡å†™äº† <strong>updated</strong> æ–¹æ³•ï¼š</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token metadata symbol">@override</span>
<span class="token keyword">void</span> <span class="token function">updated</span><span class="token punctuation">(</span>InheritedWidget oldWidget<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>widget<span class="token punctuation">.</span><span class="token function">updateShouldNotify</span><span class="token punctuation">(</span>oldWidget<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">updated</span><span class="token punctuation">(</span>oldWidget<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>å½“ <strong>updateShouldNotify</strong> è¿”å› trueæ—¶ï¼Œæ‰§è¡Œæ›´æ–°æ“ä½œã€‚è€Œå…¶çˆ¶ç±»çš„ <strong>updated</strong> æ–¹æ³•å¦‚ä¸‹ï¼š</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token metadata symbol">@protected</span>
<span class="token keyword">void</span> <span class="token function">updated</span><span class="token punctuation">(</span>covariant ProxyWidget oldWidget<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">notifyClients</span><span class="token punctuation">(</span>oldWidget<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>notifyClients æ–¹æ³•æºä»£ç ï¼š</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token metadata symbol">@override</span>
<span class="token keyword">void</span> <span class="token function">notifyClients</span><span class="token punctuation">(</span>InheritedWidget oldWidget<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">assert</span><span class="token punctuation">(</span><span class="token function">_debugCheckOwnerBuildTargetExists</span><span class="token punctuation">(</span><span class="token string">'notifyClients'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">final</span> Element dependent <span class="token keyword">in</span> _dependents<span class="token punctuation">.</span>keys<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">assert</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// check that it really is our descendant</span>
      Element ancestor <span class="token operator">=</span> dependent<span class="token punctuation">.</span>_parent<span class="token punctuation">;</span>
      <span class="token keyword">while</span> <span class="token punctuation">(</span>ancestor <span class="token operator">!=</span> <span class="token keyword">this</span> <span class="token operator">&amp;&amp;</span> ancestor <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
        ancestor <span class="token operator">=</span> ancestor<span class="token punctuation">.</span>_parent<span class="token punctuation">;</span>
      <span class="token keyword">return</span> ancestor <span class="token operator">==</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// check that it really depends on us</span>
    <span class="token keyword">assert</span><span class="token punctuation">(</span>dependent<span class="token punctuation">.</span>_dependencies<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">notifyDependent</span><span class="token punctuation">(</span>oldWidget<span class="token punctuation">,</span> dependent<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>éå† <strong>_dependents</strong>ï¼Œä¸Šé¢å·²ç»ä»‹ç»ï¼Œ_dependents æ˜¯ä¾èµ–å®ƒçš„å­ç»„ä»¶é›†åˆï¼Œéå†è°ƒç”¨ <strong>notifyDependent</strong> æ–¹æ³•ï¼š</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token metadata symbol">@protected</span>
<span class="token keyword">void</span> <span class="token function">notifyDependent</span><span class="token punctuation">(</span>covariant InheritedWidget oldWidget<span class="token punctuation">,</span> Element dependent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  dependent<span class="token punctuation">.</span><span class="token function">didChangeDependencies</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>è¿™é‡Œè°ƒç”¨äº† <strong>didChangeDependencies</strong> æ–¹æ³•ï¼Œè¿™ä¹Ÿæ˜¯ InheritedWidget ç»„ä»¶å‘ç”Ÿå˜åŒ–ï¼Œé‡å»ºæ—¶æ‰§è¡Œç”Ÿå‘½å‘¨æœŸ <strong>didChangeDependencies</strong>ã€‚</p> <p>ä¸Šé¢çš„ä»£ç éƒ½æ˜¯åœ¨ InheritedElement ä¸­çš„ï¼Œåœ¨çœ‹ä¸‹  InheritedWidget çš„æºä»£ç ï¼š</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">InheritedWidget</span> <span class="token keyword">extends</span> <span class="token class-name">ProxyWidget</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token function">InheritedWidget</span><span class="token punctuation">(</span><span class="token punctuation">{</span> Key key<span class="token punctuation">,</span> Widget child <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">:</span> <span class="token keyword">super</span><span class="token punctuation">(</span>key<span class="token punctuation">:</span> key<span class="token punctuation">,</span> child<span class="token punctuation">:</span> child<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token metadata symbol">@override</span>
  InheritedElement <span class="token function">createElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">InheritedElement</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token metadata symbol">@protected</span>
  bool <span class="token function">updateShouldNotify</span><span class="token punctuation">(</span>covariant InheritedWidget oldWidget<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>è¿™ä¸ªç±»éå¸¸ç®€å•ï¼Œåˆ›å»ºäº†ä¸€ä¸ª InheritedElementï¼Œå®šä¹‰äº†ä¸€ä¸ª updateShouldNotify æ–¹æ³•ï¼ˆä¸Šé¢å·²ç»è¯¦ç»†ä»‹ç»æ­¤æ–¹æ³•çš„ä½œç”¨ï¼‰ï¼Œå­ç±»éœ€è¦é‡å†™ã€‚</p> <p>é€šè¿‡ä¸Šé¢çš„æºç è§£æï¼Œå­ç»„ä»¶è·å–å…±äº«æ•°æ®æ—¶ï¼Œå®é™…æ˜¯ç›´æ¥åœ¨  <strong>_inheritedWidgets</strong> é›†åˆä¸­åŒ¹é…çš„ï¼Œé€šè¿‡æ–­ç‚¹ä¹Ÿå¯ä»¥æŸ¥çœ‹å…¶ä¸­çš„å†…å®¹ï¼š</p> <p><img src="http://img.laomengit.com/20210117145332.png" alt=""></p> <h4 id="æ€»ç»“"><a href="#%E6%80%BB%E7%BB%93" class="header-anchor">#</a> æ€»ç»“</h4> <p>é€šè¿‡ä¸Šé¢çš„åˆ†æï¼ŒInheritedWidget ç»„ä»¶æµç¨‹å¦‚ä¸‹ï¼š</p> <p><img src="http://img.laomengit.com/20210117145338.png" alt=""></p> <p>è¯´æ˜ï¼š</p> <ul><li>åœ¨å½“å‰ç»„ä»¶çš„ <strong>mount</strong> å’Œ <strong>activate</strong> é˜¶æ®µï¼Œç³»ç»Ÿè°ƒç”¨ <strong>_updateInheritance</strong> æ–¹æ³•ï¼Œå°† InheritedWidget ç±»å‹çš„çˆ¶ç»„ä»¶æ·»åŠ åˆ° <strong>_inheritedWidgets</strong> é›†åˆä¸­ã€‚</li> <li>å­ç»„ä»¶æ‰§è¡Œ <strong>dependOnInheritedWidgetOfExactType</strong> æ–¹æ³•æ—¶ï¼Œä» <strong>_inheritedWidgets</strong> é›†åˆä¸­è·å–æŒ‡å®š InheritedWidget ç±»å‹çš„çˆ¶ç»„ä»¶ï¼Œå¹¶å°†å½“å‰ç»„ä»¶æ³¨å†Œåˆ° InheritedWidget ç±»å‹çˆ¶ç»„ä»¶çš„ <strong>_dependents</strong> é›†åˆä¸­ã€‚</li> <li>InheritedWidget ç»„ä»¶æ•°æ®å‘ç”Ÿå˜åŒ–ï¼ˆ<strong>updateShouldNotify</strong> æ–¹æ³•è¿”å›trueï¼‰ï¼Œé‡å»ºæ—¶ï¼ŒInheritedWidget ç»„ä»¶éå† <strong>_dependents</strong> é›†åˆä¸­æ‰€æœ‰ä¾èµ–çš„å­ç»„ä»¶ï¼Œæ‰§è¡Œå­ç»„ä»¶çš„ <strong>didChangeDependencies</strong> çš„æ–¹æ³•ã€‚</li></ul> <h4 id="ä¸€ç‚¹çœ‹æ³•"><a href="#%E4%B8%80%E7%82%B9%E7%9C%8B%E6%B3%95" class="header-anchor">#</a> ä¸€ç‚¹çœ‹æ³•</h4> <p>é‚£ä¹ˆä¸ºä»€ä¹ˆæ˜¯åœ¨å½“å‰ç»„ä»¶çš„ä¸­ä¿å­˜è¿™æ ·ä¸€ä¸ª Map é›†åˆï¼Œè€Œä¸æ˜¯ä¾æ¬¡å‘ä¸ŠæŸ¥æ‰¾å‘¢ï¼ˆæˆ‘æœ€å¼€å§‹çš„æƒ³æ³•ï¼‰ï¼Ÿ</p> <p>ä¸‹é¢æ˜¯æˆ‘ä¸ªäººçš„ä¸€ç‚¹çœ‹æ³•ï¼Œå¦‚æœä½ æœ‰ä¸åŒçš„çœ‹æ³•ï¼Œæ¬¢è¿ä¸€èµ·è®¨è®ºï¼š</p> <p>å½“å‰ç»„ä»¶çš„ä¸­ä¿å­˜è¿™æ ·ä¸€ä¸ª Map é›†åˆï¼Œè·å–å…±äº«æ•°æ®æ—¶ç›´æ¥å®šä½ä¾èµ–çš„ InheritedWidgetï¼Œå¤æ‚åº¦ O(1) ã€‚</p> <p>è€Œä¾æ¬¡å‘ä¸ŠæŸ¥æ‰¾çš„å¤æ‚åº¦æ˜¯ O(n)ï¼Œæ ‘çš„ç»“æ„è¶Šæ·±ï¼Œæ¶ˆè€—æ—¶é—´è¶Šé•¿ï¼Œå¤æ‚åº¦çº¿æ€§å¢é•¿ã€‚</p></div> <footer class="page-edit"><div class="gitbook-donate"><div></div> <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}"><span>å–œæ¬¢ä½œè€…</span></button><div id="QR" style="display: none;"><div id="wechat" style="display: inline-block"><a href="http://img.laomengit.com/laomeng_reward.png" rel="group" class="fancybox"><img id="wechat_qr" src="http://img.laomengit.com/laomeng_reward.png" alt="WeChat Pay"></a> <p>å¾®ä¿¡æ‰“èµ</p></div></div></div> <!----></footer> <!----> </main> <!----></div><div class="global-ui"><div class="reading-progress top" data-v-21b39eda><div class="progress" data-v-21b39eda></div></div></div></div>
    <script src="../assets/js/app.fb541e49.js" defer></script><script src="../assets/js/2.ed846731.js" defer></script><script src="../assets/js/55.c1bbd918.js" defer></script>
  </body>
</html>